# /config/packages/victron_modbus_smoketest.yaml
# Nur AUSLESEN (read-only). Erstmal 3 Register: Grid-Setpoint (32-bit), Min-SoC, Max-Charge-Voltage.
# Eigener Hub-Name, damit es nicht mit bestehendem Modbus kollidiert.

modbus:
  - name: victron_cerbo_test
    type: tcp
    host: 192.168.178.26
    port: 502

    sensors:
      # a) Grid power setpoint (Venus >= 3.50: 32-bit bei 2716-2717)
      - name: victron_grid_power_setpoint_w
        unique_id: victron_grid_power_setpoint_w
        slave: 100
        address: 2716
        input_type: holding
        count: 2
        data_type: int32
        unit_of_measurement: "W"

      # b) ESS Minimum SoC (dein Wert war 80,0 %)
      - name: victron_ess_min_soc_percent
        unique_id: victron_ess_min_soc_percent
        slave: 100
        address: 2901
        input_type: holding
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "%"

      # c) Systemsetup: Max Charge Voltage (du hattest 49.2 V genannt)
      - name: victron_limit_managed_batt_voltage_v
        unique_id: victron_limit_managed_batt_voltage_v
        slave: 100
        address: 2710
        input_type: holding
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "V"
