/config/packages/42_abrechnung_2025.yaml-21-          {{ (s | sum) | round(2) }}
/config/packages/42_abrechnung_2025.yaml-22-
/config/packages/42_abrechnung_2025.yaml:23:      # Wohnungssummen ‚Äì WHG01..WHG04
/config/packages/42_abrechnung_2025.yaml:24:      - name: whg01_betriebskosten_summe_eur_2025
/config/packages/42_abrechnung_2025.yaml-25-        unit_of_measurement: "‚Ç¨"
/config/packages/42_abrechnung_2025.yaml-26-        state: >-
/config/packages/42_abrechnung_2025.yaml-27-          {% set s = [
/config/packages/42_abrechnung_2025.yaml:28:            states('sensor.whg01_strom_variabel_anteil_eur_2025'),
/config/packages/42_abrechnung_2025.yaml:29:            states('sensor.whg01_strom_grundpreis_anteil_eur_2025'),
/config/packages/42_abrechnung_2025.yaml:30:            states('sensor.whg01_wasser_anteil_eur_2025'),
/config/packages/42_abrechnung_2025.yaml:31:            states('sensor.whg01_abwasser_anteil_eur_2025'),
/config/packages/42_abrechnung_2025.yaml:32:            states('sensor.whg01_grundsteuer_anteil_eur_2025'),
/config/packages/42_abrechnung_2025.yaml:33:            states('sensor.whg01_versicherung_anteil_eur_2025'),
/config/packages/42_abrechnung_2025.yaml:34:            states('sensor.whg01_muell_anteil_eur_2025'),
/config/packages/42_abrechnung_2025.yaml:35:            states('sensor.whg01_niederschlagswasser_anteil_eur_2025'),
/config/packages/42_abrechnung_2025.yaml:36:            states('sensor.whg01_wartung_heizung_anteil_eur_2025'),
/config/packages/42_abrechnung_2025.yaml:37:            states('sensor.whg01_abrechnungsservice_anteil_eur_2025')
/config/packages/42_abrechnung_2025.yaml-38-          ] | map('float', 0) | list %}
/config/packages/42_abrechnung_2025.yaml-39-          {{ (s | sum) | round(2) }}
/config/packages/.git/index-40-
/config/packages/.git/index-41-˚µÚCGÔªP÷ﬂW'ú§“Œ˙D∞0
/config/packages/.git/index:42:20_mieter_whg01.yaml
/config/packages/.git/index-43-
/config/packages/.git/index-44-
--
/config/packages/.git/index-172-
/config/packages/.git/index-173- ùFR˜ÈM^»}¢.:Äøµ?ﬂ®º
/config/packages/.git/index:174:31_zaehler_whg01.yaml
/config/packages/.git/index-175-
/config/packages/.git/index-176-
--
/config/packages/.git/index-337-
/config/packages/.git/index-338-	v.ó¿.)·ÚÔ∫†1ôvF∑p
/config/packages/.git/index:339:$42_abrechnung_2025_whg01_wasser.yaml
/config/packages/.git/index-340-
/config/packages/.git/index-341-
--
/config/packages/.git/index-359-
/config/packages/.git/index-360-Pá8O~*&≠ñµ>Û›ª1içKÅ
/config/packages/.git/index:361:42_abrechnung_whg01_bridge.yaml
/config/packages/.git/index-362-
/config/packages/.git/index-363-
--
/config/packages/.git/index-1206-
/config/packages/.git/index-1207-Û8'◊J¥ºáT°©≤Ø±AÑı˝ë
/config/packages/.git/index:1208:wasser_whg01.yaml
/config/packages/.git/index-1209-höƒ6y¥îhöƒ6y¥î
/config/packages/.git/index-1210-
--
/config/packages/.git/index-1244-
/config/packages/.git/index-1245-.E¯ˇ˙äß0ä36⁄í˜{^ïï
/config/packages/.git/index:1246:whg01_kosten.yaml
/config/packages/.git/index-1247-h¥íÑ$Ôπh¥íÑ$Ôπ
/config/packages/.git/index-1248-
--
/config/packages/31_zaehler_whg01.yaml:1:# /config/packages/31_zaehler_whg01.yaml
/config/packages/31_zaehler_whg01.yaml:2:# Z√§hler & Eichfristen ‚Äì WHG01  (+ MQTT-Felder WaterStar M)
/config/packages/31_zaehler_whg01.yaml-3-
/config/packages/31_zaehler_whg01.yaml-4-# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
--
/config/packages/31_zaehler_whg01.yaml-6-# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
/config/packages/31_zaehler_whg01.yaml-7-input_text:
/config/packages/31_zaehler_whg01.yaml:8:  whg01_wasser_kalt_meter_id:
/config/packages/31_zaehler_whg01.yaml:9:    name: "WHG01 ‚Äì KW: Meter-ID"
/config/packages/31_zaehler_whg01.yaml-10-    max: 32
/config/packages/31_zaehler_whg01.yaml:11:  whg01_wasser_kalt_meter_key:
/config/packages/31_zaehler_whg01.yaml:12:    name: "WHG01 ‚Äì KW: Meter-Key (HEX)"
/config/packages/31_zaehler_whg01.yaml-13-    max: 64
/config/packages/31_zaehler_whg01.yaml:14:  whg01_wasser_kalt_hersteller:
/config/packages/31_zaehler_whg01.yaml:15:    name: "WHG01 ‚Äì KW: Hersteller/Typ"
/config/packages/31_zaehler_whg01.yaml-16-    max: 80
/config/packages/31_zaehler_whg01.yaml:17:  whg01_wasser_kalt_standort:
/config/packages/31_zaehler_whg01.yaml:18:    name: "WHG01 ‚Äì KW: Standort"
/config/packages/31_zaehler_whg01.yaml-19-    max: 80
/config/packages/31_zaehler_whg01.yaml-20-
/config/packages/31_zaehler_whg01.yaml:21:  whg01_wasser_warm_meter_id:
/config/packages/31_zaehler_whg01.yaml:22:    name: "WHG01 ‚Äì WW: Meter-ID"
/config/packages/31_zaehler_whg01.yaml-23-    max: 32
/config/packages/31_zaehler_whg01.yaml:24:  whg01_wasser_warm_meter_key:
/config/packages/31_zaehler_whg01.yaml:25:    name: "WHG01 ‚Äì WW: Meter-Key (HEX)"
/config/packages/31_zaehler_whg01.yaml-26-    max: 64
/config/packages/31_zaehler_whg01.yaml:27:  whg01_wasser_warm_hersteller:
/config/packages/31_zaehler_whg01.yaml:28:    name: "WHG01 ‚Äì WW: Hersteller/Typ"
/config/packages/31_zaehler_whg01.yaml-29-    max: 80
/config/packages/31_zaehler_whg01.yaml:30:  whg01_wasser_warm_standort:
/config/packages/31_zaehler_whg01.yaml:31:    name: "WHG01 ‚Äì WW: Standort"
/config/packages/31_zaehler_whg01.yaml-32-    max: 80
/config/packages/31_zaehler_whg01.yaml-33-
/config/packages/31_zaehler_whg01.yaml:34:  whg01_wmz_meter_id:
/config/packages/31_zaehler_whg01.yaml:35:    name: "WHG01 ‚Äì WMZ: Meter-ID"
/config/packages/31_zaehler_whg01.yaml-36-    max: 32
/config/packages/31_zaehler_whg01.yaml:37:  whg01_wmz_meter_key:
/config/packages/31_zaehler_whg01.yaml:38:    name: "WHG01 ‚Äì WMZ: Meter-Key (HEX)"
/config/packages/31_zaehler_whg01.yaml-39-    max: 64
/config/packages/31_zaehler_whg01.yaml:40:  whg01_wmz_hersteller:
/config/packages/31_zaehler_whg01.yaml:41:    name: "WHG01 ‚Äì WMZ: Hersteller/Typ"
/config/packages/31_zaehler_whg01.yaml-42-    max: 80
/config/packages/31_zaehler_whg01.yaml:43:  whg01_wmz_standort:
/config/packages/31_zaehler_whg01.yaml:44:    name: "WHG01 ‚Äì WMZ: Standort"
/config/packages/31_zaehler_whg01.yaml-45-    max: 80
/config/packages/31_zaehler_whg01.yaml-46-
/config/packages/31_zaehler_whg01.yaml:47:  whg01_strom_meter_id:
/config/packages/31_zaehler_whg01.yaml:48:    name: "WHG01 ‚Äì Strom: Z√§hlernummer/ID"
/config/packages/31_zaehler_whg01.yaml-49-    max: 32
/config/packages/31_zaehler_whg01.yaml:50:  whg01_strom_meter_key:
/config/packages/31_zaehler_whg01.yaml:51:    name: "WHG01 ‚Äì Strom: Schl√ºssel (optional)"
/config/packages/31_zaehler_whg01.yaml-52-    max: 64
/config/packages/31_zaehler_whg01.yaml:53:  whg01_strom_hersteller:
/config/packages/31_zaehler_whg01.yaml:54:    name: "WHG01 ‚Äì Strom: Hersteller/Typ"
/config/packages/31_zaehler_whg01.yaml-55-    max: 80
/config/packages/31_zaehler_whg01.yaml:56:  whg01_strom_standort:
/config/packages/31_zaehler_whg01.yaml:57:    name: "WHG01 ‚Äì Strom: Standort"
/config/packages/31_zaehler_whg01.yaml-58-    max: 80
/config/packages/31_zaehler_whg01.yaml-59-
/config/packages/31_zaehler_whg01.yaml-60-input_number:
/config/packages/31_zaehler_whg01.yaml:61:  whg01_kw_eichfrist_jahre:
/config/packages/31_zaehler_whg01.yaml:62:    name: "WHG01 ‚Äì KW: Eichfrist [Jahre]"
/config/packages/31_zaehler_whg01.yaml-63-    min: 1
/config/packages/31_zaehler_whg01.yaml-64-    max: 20
--
/config/packages/31_zaehler_whg01.yaml-66-    mode: box
/config/packages/31_zaehler_whg01.yaml-67-    initial: 6
/config/packages/31_zaehler_whg01.yaml:68:  whg01_ww_eichfrist_jahre:
/config/packages/31_zaehler_whg01.yaml:69:    name: "WHG01 ‚Äì WW: Eichfrist [Jahre]"
/config/packages/31_zaehler_whg01.yaml-70-    min: 1
/config/packages/31_zaehler_whg01.yaml-71-    max: 20
--
/config/packages/31_zaehler_whg01.yaml-73-    mode: box
/config/packages/31_zaehler_whg01.yaml-74-    initial: 6
/config/packages/31_zaehler_whg01.yaml:75:  whg01_wmz_eichfrist_jahre:
/config/packages/31_zaehler_whg01.yaml:76:    name: "WHG01 ‚Äì WMZ: Eichfrist [Jahre]"
/config/packages/31_zaehler_whg01.yaml-77-    min: 1
/config/packages/31_zaehler_whg01.yaml-78-    max: 20
--
/config/packages/31_zaehler_whg01.yaml-80-    mode: box
/config/packages/31_zaehler_whg01.yaml-81-    initial: 6
/config/packages/31_zaehler_whg01.yaml:82:  whg01_strom_eichfrist_jahre:
/config/packages/31_zaehler_whg01.yaml:83:    name: "WHG01 ‚Äì Strom: Eichfrist [Jahre]"
/config/packages/31_zaehler_whg01.yaml-84-    min: 1
/config/packages/31_zaehler_whg01.yaml-85-    max: 20
--
/config/packages/31_zaehler_whg01.yaml-89-
/config/packages/31_zaehler_whg01.yaml-90-input_datetime:
/config/packages/31_zaehler_whg01.yaml:91:  whg01_wasser_kalt_montage:
/config/packages/31_zaehler_whg01.yaml:92:    name: "WHG01 ‚Äì KW: Montage"
/config/packages/31_zaehler_whg01.yaml-93-    has_date: true
/config/packages/31_zaehler_whg01.yaml-94-    has_time: false
/config/packages/31_zaehler_whg01.yaml:95:  whg01_wasser_warm_montage:
/config/packages/31_zaehler_whg01.yaml:96:    name: "WHG01 ‚Äì WW: Montage"
/config/packages/31_zaehler_whg01.yaml-97-    has_date: true
/config/packages/31_zaehler_whg01.yaml-98-    has_time: false
/config/packages/31_zaehler_whg01.yaml:99:  whg01_wmz_montage:
/config/packages/31_zaehler_whg01.yaml:100:    name: "WHG01 ‚Äì WMZ: Montage"
/config/packages/31_zaehler_whg01.yaml-101-    has_date: true
/config/packages/31_zaehler_whg01.yaml-102-    has_time: false
/config/packages/31_zaehler_whg01.yaml:103:  whg01_strom_montage:
/config/packages/31_zaehler_whg01.yaml:104:    name: "WHG01 ‚Äì Strom: Montage"
/config/packages/31_zaehler_whg01.yaml-105-    has_date: true
/config/packages/31_zaehler_whg01.yaml-106-    has_time: false
--
/config/packages/31_zaehler_whg01.yaml-108-template:
/config/packages/31_zaehler_whg01.yaml-109-  - sensor:
/config/packages/31_zaehler_whg01.yaml:110:      - name: whg01_kw_eich_ablauf
/config/packages/31_zaehler_whg01.yaml:111:        unique_id: whg01_kw_eich_ablauf
/config/packages/31_zaehler_whg01.yaml-112-        device_class: timestamp
/config/packages/31_zaehler_whg01.yaml-113-        state: >-
/config/packages/31_zaehler_whg01.yaml:114:          {% set d = states('input_datetime.whg01_wasser_kalt_montage') %}
/config/packages/31_zaehler_whg01.yaml:115:          {% set y = states('input_number.whg01_kw_eichfrist_jahre')|int(0) %}
/config/packages/31_zaehler_whg01.yaml-116-          {% if d not in ['unknown','unavailable',''] and y > 0 %}
/config/packages/31_zaehler_whg01.yaml-117-            {{ (as_datetime(d).date().replace(year=as_datetime(d).year + y)).isoformat() }}
/config/packages/31_zaehler_whg01.yaml-118-          {% else %} {{ none }} {% endif %}
/config/packages/31_zaehler_whg01.yaml-119-
/config/packages/31_zaehler_whg01.yaml:120:      - name: whg01_ww_eich_ablauf
/config/packages/31_zaehler_whg01.yaml:121:        unique_id: whg01_ww_eich_ablauf
/config/packages/31_zaehler_whg01.yaml-122-        device_class: timestamp
/config/packages/31_zaehler_whg01.yaml-123-        state: >-
/config/packages/31_zaehler_whg01.yaml:124:          {% set d = states('input_datetime.whg01_wasser_warm_montage') %}
/config/packages/31_zaehler_whg01.yaml:125:          {% set y = states('input_number.whg01_ww_eichfrist_jahre')|int(0) %}
/config/packages/31_zaehler_whg01.yaml-126-          {% if d not in ['unknown','unavailable',''] and y > 0 %}
/config/packages/31_zaehler_whg01.yaml-127-            {{ (as_datetime(d).date().replace(year=as_datetime(d).year + y)).isoformat() }}
/config/packages/31_zaehler_whg01.yaml-128-          {% else %} {{ none }} {% endif %}
/config/packages/31_zaehler_whg01.yaml-129-
/config/packages/31_zaehler_whg01.yaml:130:      - name: whg01_wmz_eich_ablauf
/config/packages/31_zaehler_whg01.yaml:131:        unique_id: whg01_wmz_eich_ablauf
/config/packages/31_zaehler_whg01.yaml-132-        device_class: timestamp
/config/packages/31_zaehler_whg01.yaml-133-        state: >-
/config/packages/31_zaehler_whg01.yaml:134:          {% set d = states('input_datetime.whg01_wmz_montage') %}
/config/packages/31_zaehler_whg01.yaml:135:          {% set y = states('input_number.whg01_wmz_eichfrist_jahre')|int(0) %}
/config/packages/31_zaehler_whg01.yaml-136-          {% if d not in ['unknown','unavailable',''] and y > 0 %}
/config/packages/31_zaehler_whg01.yaml-137-            {{ (as_datetime(d).date().replace(year=as_datetime(d).year + y)).isoformat() }}
/config/packages/31_zaehler_whg01.yaml-138-          {% else %} {{ none }} {% endif %}
/config/packages/31_zaehler_whg01.yaml-139-
/config/packages/31_zaehler_whg01.yaml:140:      - name: whg01_strom_eich_ablauf
/config/packages/31_zaehler_whg01.yaml:141:        unique_id: whg01_strom_eich_ablauf
/config/packages/31_zaehler_whg01.yaml-142-        device_class: timestamp
/config/packages/31_zaehler_whg01.yaml-143-        state: >-
/config/packages/31_zaehler_whg01.yaml:144:          {% set d = states('input_datetime.whg01_strom_montage') %}
/config/packages/31_zaehler_whg01.yaml:145:          {% set y = states('input_number.whg01_strom_eichfrist_jahre')|int(0) %}
/config/packages/31_zaehler_whg01.yaml-146-          {% if d not in ['unknown','unavailable',''] and y > 0 %}
/config/packages/31_zaehler_whg01.yaml-147-            {{ (as_datetime(d).date().replace(year=as_datetime(d).year + y)).isoformat() }}
--
/config/packages/31_zaehler_whg01.yaml-150-# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
/config/packages/31_zaehler_whg01.yaml-151-# NEU: MQTT ‚Üí WaterStar M (wmbusmeters)
/config/packages/31_zaehler_whg01.yaml:152:#  - Quelle: Topic wmbusmeters/Wasserzaehler_Whg01
/config/packages/31_zaehler_whg01.yaml-153-#  - Liefert total_m3 als state + alle JSON-Attribute
/config/packages/31_zaehler_whg01.yaml-154-# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
/config/packages/31_zaehler_whg01.yaml-155-mqtt:
/config/packages/31_zaehler_whg01.yaml-156-  sensor:
/config/packages/31_zaehler_whg01.yaml:157:    - name: "whg01_wasser_total_m3"
/config/packages/31_zaehler_whg01.yaml:158:      unique_id: whg01_wasser_total_m3
/config/packages/31_zaehler_whg01.yaml:159:      state_topic: "wmbusmeters/Wasserzaehler_Whg01"
/config/packages/31_zaehler_whg01.yaml-160-      value_template: "{{ value_json.total_m3 | float(0) }}"
/config/packages/31_zaehler_whg01.yaml-161-      unit_of_measurement: "m¬≥"
/config/packages/31_zaehler_whg01.yaml-162-      device_class: water
/config/packages/31_zaehler_whg01.yaml-163-      state_class: total_increasing
/config/packages/31_zaehler_whg01.yaml:164:      json_attributes_topic: "wmbusmeters/Wasserzaehler_Whg01"
/config/packages/31_zaehler_whg01.yaml-165-
/config/packages/31_zaehler_whg01.yaml-166-# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
--
/config/packages/31_zaehler_whg01.yaml-170-  - sensor:
/config/packages/31_zaehler_whg01.yaml-171-      # Z√§hlernummer (aus JSON id)
/config/packages/31_zaehler_whg01.yaml:172:      - name: "whg01_wasser_zaehlernummer"
/config/packages/31_zaehler_whg01.yaml:173:        unique_id: whg01_wasser_zaehlernummer
/config/packages/31_zaehler_whg01.yaml:174:        state: "{{ state_attr('sensor.whg01_wasser_total_m3','id') or 'unknown' }}"
/config/packages/31_zaehler_whg01.yaml-175-
/config/packages/31_zaehler_whg01.yaml-176-      # Hersteller/Modell (fest f√ºr WaterStar M)
/config/packages/31_zaehler_whg01.yaml:177:      - name: "whg01_wasser_hersteller"
/config/packages/31_zaehler_whg01.yaml:178:        unique_id: whg01_wasser_hersteller
/config/packages/31_zaehler_whg01.yaml-179-        state: "Engelmann"
/config/packages/31_zaehler_whg01.yaml:180:      - name: "whg01_wasser_modell"
/config/packages/31_zaehler_whg01.yaml:181:        unique_id: whg01_wasser_modell
/config/packages/31_zaehler_whg01.yaml-182-        state: "WaterStar M"
/config/packages/31_zaehler_whg01.yaml-183-
/config/packages/31_zaehler_whg01.yaml-184-      # Funkmodus (aus deiner Add-on-Konfig ‚Üí C1)
/config/packages/31_zaehler_whg01.yaml:185:      - name: "whg01_wasser_funkmodus"
/config/packages/31_zaehler_whg01.yaml:186:        unique_id: whg01_wasser_funkmodus
/config/packages/31_zaehler_whg01.yaml-187-        state: "C1"
/config/packages/31_zaehler_whg01.yaml-188-
/config/packages/31_zaehler_whg01.yaml-189-      # Empfangspegel
/config/packages/31_zaehler_whg01.yaml:190:      - name: "whg01_wasser_rssi_dbm"
/config/packages/31_zaehler_whg01.yaml:191:        unique_id: whg01_wasser_rssi_dbm
/config/packages/31_zaehler_whg01.yaml-192-        unit_of_measurement: "dBm"
/config/packages/31_zaehler_whg01.yaml:193:        state: "{{ state_attr('sensor.whg01_wasser_total_m3','rssi_dbm') | default('unknown') }}"
/config/packages/31_zaehler_whg01.yaml-194-
/config/packages/31_zaehler_whg01.yaml-195-      # Letztes empfangenes Telegramm (UTC ISO)
/config/packages/31_zaehler_whg01.yaml:196:      - name: "whg01_wasser_telegramm_zeit"
/config/packages/31_zaehler_whg01.yaml:197:        unique_id: whg01_wasser_telegramm_zeit
/config/packages/31_zaehler_whg01.yaml-198-        device_class: timestamp
/config/packages/31_zaehler_whg01.yaml-199-        state: >
/config/packages/31_zaehler_whg01.yaml:200:          {% set ts = state_attr('sensor.whg01_wasser_total_m3','timestamp') %}
/config/packages/31_zaehler_whg01.yaml-201-          {{ ts if ts not in ['unknown','unavailable',None] else now().isoformat() }}
/config/packages/31_zaehler_whg01.yaml-202-
/config/packages/31_zaehler_whg01.yaml-203-      # Ger√§tezeit im Z√§hler (falls gesetzt)
/config/packages/31_zaehler_whg01.yaml:204:      - name: "whg01_wasser_meter_datetime"
/config/packages/31_zaehler_whg01.yaml:205:        unique_id: whg01_wasser_meter_datetime
/config/packages/31_zaehler_whg01.yaml-206-        device_class: timestamp
/config/packages/31_zaehler_whg01.yaml-207-        state: >
/config/packages/31_zaehler_whg01.yaml:208:          {% set dt = state_attr('sensor.whg01_wasser_total_m3','meter_datetime') %}
/config/packages/31_zaehler_whg01.yaml-209-          {{ (dt ~ ':00') if dt not in ['unknown','unavailable',None] else now().isoformat() }}
/config/packages/31_zaehler_whg01.yaml-210-
/config/packages/31_zaehler_whg01.yaml-211-      # Spiegel des Totalstands (f√ºr Karten, die nur Templates nehmen)
/config/packages/31_zaehler_whg01.yaml:212:      - name: "whg01_wasser_total_m3_spiegel"
/config/packages/31_zaehler_whg01.yaml:213:        unique_id: whg01_wasser_total_m3_spiegel
/config/packages/31_zaehler_whg01.yaml-214-        unit_of_measurement: "m¬≥"
/config/packages/31_zaehler_whg01.yaml-215-        device_class: water
/config/packages/31_zaehler_whg01.yaml-216-        state_class: total_increasing
/config/packages/31_zaehler_whg01.yaml:217:        state: "{{ states('sensor.whg01_wasser_total_m3') | float(0) }}"
--
/config/packages/ENTITY_INDEX.md-98-- **input_boolean.strom_gridcharge_request** ‚Äî *GridCharge ‚Äì Ladefreigabe (Request)*  
/config/packages/ENTITY_INDEX.md-99-  `Quelle:` /homeassistant/packages/tibber_gridcharge.yaml
/config/packages/ENTITY_INDEX.md:100:- **input_boolean.whg01_notify_enabled** ‚Äî *WHG01 ‚Äì Monatsbenachrichtigung Verbrauch*  
/config/packages/ENTITY_INDEX.md:101:  `Quelle:` /homeassistant/packages/20_mieter_whg01.yaml
/config/packages/ENTITY_INDEX.md:102:- **input_boolean.whg01_notify_verbrauch_monatlich** ‚Äî *WHG01 ‚Äì Monatsbenachrichtigung Verbrauch*  
/config/packages/ENTITY_INDEX.md:103:  `Quelle:` /homeassistant/packages/20_mieter_whg01.yaml
/config/packages/ENTITY_INDEX.md-104-- **input_boolean.whg02_notify_enabled** ‚Äî *WHG02 ‚Äì Monatsbenachrichtigung Verbrauch*  
/config/packages/ENTITY_INDEX.md-105-  `Quelle:` /homeassistant/packages/20_mieter_whg02.yaml
--
/config/packages/ENTITY_INDEX.md-123-- **input_datetime.haus_allgemeinstrom_golive_2025** ‚Äî *Haus ‚Äì Kosten: Go-Live Datum Strom (2025)*  
/config/packages/ENTITY_INDEX.md-124-  `Quelle:` /homeassistant/packages/40_kosten_2025_haus.yaml
/config/packages/ENTITY_INDEX.md:125:- **input_datetime.whg01_auszug** ‚Äî *WHG01 ‚Äì Mietende*  
/config/packages/ENTITY_INDEX.md:126:  `Quelle:` /homeassistant/packages/20_mieter_whg01.yaml
/config/packages/ENTITY_INDEX.md:127:- **input_datetime.whg01_einzug** ‚Äî *WHG01 ‚Äì Mietbeginn*  
/config/packages/ENTITY_INDEX.md:128:  `Quelle:` /homeassistant/packages/20_mieter_whg01.yaml
/config/packages/ENTITY_INDEX.md:129:- **input_datetime.whg01_strom_montage** ‚Äî *WHG01 ‚Äì Strom: Montage*  
/config/packages/ENTITY_INDEX.md:130:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:131:- **input_datetime.whg01_wasser_kalt_montage** ‚Äî *WHG01 ‚Äì KW: Montage*  
/config/packages/ENTITY_INDEX.md:132:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:133:- **input_datetime.whg01_wasser_warm_montage** ‚Äî *WHG01 ‚Äì WW: Montage*  
/config/packages/ENTITY_INDEX.md:134:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:135:- **input_datetime.whg01_wmz_montage** ‚Äî *WHG01 ‚Äì WMZ: Montage*  
/config/packages/ENTITY_INDEX.md:136:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md-137-- **input_datetime.whg02_auszug** ‚Äî *WHG02 ‚Äì Mietende*  
/config/packages/ENTITY_INDEX.md-138-  `Quelle:` /homeassistant/packages/20_mieter_whg02.yaml
--
/config/packages/ENTITY_INDEX.md-290-- **input_number.pv_to_dhw_normal_temp_c** `¬∞C` ‚Äî *PV‚ÜíDHW: Normal-Temperatur [¬∞C]*  
/config/packages/ENTITY_INDEX.md-291-  `Quelle:` /homeassistant/packages/pv_to_dhw_boost.yaml
/config/packages/ENTITY_INDEX.md:292:- **input_number.whg01_kaution_eur** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kaution [‚Ç¨]*  
/config/packages/ENTITY_INDEX.md:293:  `Quelle:` /homeassistant/packages/20_mieter_whg01.yaml
/config/packages/ENTITY_INDEX.md:294:- **input_number.whg01_kw_eichfrist_jahre** ‚Äî *WHG01 ‚Äì KW: Eichfrist [Jahre]*  
/config/packages/ENTITY_INDEX.md:295:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:296:- **input_number.whg01_personen** `Personen` ‚Äî *WHG01 ‚Äì Personen [Anzahl]*  
/config/packages/ENTITY_INDEX.md:297:  `Quelle:` /homeassistant/packages/20_mieter_whg01.yaml
/config/packages/ENTITY_INDEX.md:298:- **input_number.whg01_strom_eichfrist_jahre** ‚Äî *WHG01 ‚Äì Strom: Eichfrist [Jahre]*  
/config/packages/ENTITY_INDEX.md:299:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:300:- **input_number.whg01_wmz_eichfrist_jahre** ‚Äî *WHG01 ‚Äì WMZ: Eichfrist [Jahre]*  
/config/packages/ENTITY_INDEX.md:301:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:302:- **input_number.whg01_wohnflaeche_m2** `m¬≤` ‚Äî *WHG01 ‚Äì Wohnfl√§che [m¬≤]*  
/config/packages/ENTITY_INDEX.md:303:  `Quelle:` /homeassistant/packages/20_mieter_whg01.yaml
/config/packages/ENTITY_INDEX.md:304:- **input_number.whg01_ww_eichfrist_jahre** ‚Äî *WHG01 ‚Äì WW: Eichfrist [Jahre]*  
/config/packages/ENTITY_INDEX.md:305:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md-306-- **input_number.whg02_kaution_eur** `‚Ç¨` ‚Äî *WHG02 ‚Äì Kaution [‚Ç¨]*  
/config/packages/ENTITY_INDEX.md-307-  `Quelle:` /homeassistant/packages/20_mieter_whg02.yaml
--
/config/packages/ENTITY_INDEX.md-410-- **input_text.heat_solar_th_kwh_month_entity** ‚Äî *Heizpool ‚Äì Solar: TH kWh (Monat, WMZ) ‚Äì Entity-ID*  
/config/packages/ENTITY_INDEX.md-411-  `Quelle:` /homeassistant/packages/heizkosten_quellen.yaml
/config/packages/ENTITY_INDEX.md:412:- **input_text.whg01_mieter_nachname** ‚Äî *WHG01 ‚Äì Nachname*  
/config/packages/ENTITY_INDEX.md:413:  `Quelle:` /homeassistant/packages/20_mieter_whg01.yaml
/config/packages/ENTITY_INDEX.md:414:- **input_text.whg01_mieter_vorname** ‚Äî *WHG01 ‚Äì Vorname*  
/config/packages/ENTITY_INDEX.md:415:  `Quelle:` /homeassistant/packages/20_mieter_whg01.yaml
/config/packages/ENTITY_INDEX.md:416:- **input_text.whg01_notizen** ‚Äî *WHG01 ‚Äì Notizen*  
/config/packages/ENTITY_INDEX.md:417:  `Quelle:` /homeassistant/packages/20_mieter_whg01.yaml
/config/packages/ENTITY_INDEX.md:418:- **input_text.whg01_phone** ‚Äî *WHG01 ‚Äì Telefon*  
/config/packages/ENTITY_INDEX.md:419:  `Quelle:` /homeassistant/packages/20_mieter_whg01.yaml
/config/packages/ENTITY_INDEX.md:420:- **input_text.whg01_strom_hersteller** ‚Äî *WHG01 ‚Äì Strom: Hersteller/Typ*  
/config/packages/ENTITY_INDEX.md:421:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:422:- **input_text.whg01_strom_meter_id** ‚Äî *WHG01 ‚Äì Strom: Z√§hlernummer/ID*  
/config/packages/ENTITY_INDEX.md:423:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:424:- **input_text.whg01_strom_meter_key** ‚Äî *WHG01 ‚Äì Strom: Schl√ºssel (optional)*  
/config/packages/ENTITY_INDEX.md:425:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:426:- **input_text.whg01_strom_standort** ‚Äî *WHG01 ‚Äì Strom: Standort*  
/config/packages/ENTITY_INDEX.md:427:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:428:- **input_text.whg01_tenant_email** ‚Äî *WHG01 ‚Äì E-Mail*  
/config/packages/ENTITY_INDEX.md:429:  `Quelle:` /homeassistant/packages/20_mieter_whg01.yaml
/config/packages/ENTITY_INDEX.md:430:- **input_text.whg01_wasser_kalt_hersteller** ‚Äî *WHG01 ‚Äì KW: Hersteller/Typ*  
/config/packages/ENTITY_INDEX.md:431:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:432:- **input_text.whg01_wasser_kalt_meter_id** ‚Äî *WHG01 ‚Äì KW: Meter-ID*  
/config/packages/ENTITY_INDEX.md:433:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:434:- **input_text.whg01_wasser_kalt_meter_key** ‚Äî *WHG01 ‚Äì KW: Meter-Key (HEX)*  
/config/packages/ENTITY_INDEX.md:435:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:436:- **input_text.whg01_wasser_kalt_standort** ‚Äî *WHG01 ‚Äì KW: Standort*  
/config/packages/ENTITY_INDEX.md:437:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:438:- **input_text.whg01_wasser_warm_hersteller** ‚Äî *WHG01 ‚Äì WW: Hersteller/Typ*  
/config/packages/ENTITY_INDEX.md:439:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:440:- **input_text.whg01_wasser_warm_meter_id** ‚Äî *WHG01 ‚Äì WW: Meter-ID*  
/config/packages/ENTITY_INDEX.md:441:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:442:- **input_text.whg01_wasser_warm_meter_key** ‚Äî *WHG01 ‚Äì WW: Meter-Key (HEX)*  
/config/packages/ENTITY_INDEX.md:443:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:444:- **input_text.whg01_wasser_warm_standort** ‚Äî *WHG01 ‚Äì WW: Standort*  
/config/packages/ENTITY_INDEX.md:445:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:446:- **input_text.whg01_wmz_hersteller** ‚Äî *WHG01 ‚Äì WMZ: Hersteller/Typ*  
/config/packages/ENTITY_INDEX.md:447:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:448:- **input_text.whg01_wmz_meter_id** ‚Äî *WHG01 ‚Äì WMZ: Meter-ID*  
/config/packages/ENTITY_INDEX.md:449:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:450:- **input_text.whg01_wmz_meter_key** ‚Äî *WHG01 ‚Äì WMZ: Meter-Key (HEX)*  
/config/packages/ENTITY_INDEX.md:451:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:452:- **input_text.whg01_wmz_standort** ‚Äî *WHG01 ‚Äì WMZ: Standort*  
/config/packages/ENTITY_INDEX.md:453:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md-454-- **input_text.whg02_mieter_nachname** ‚Äî *WHG02 ‚Äì Nachname*  
/config/packages/ENTITY_INDEX.md-455-  `Quelle:` /homeassistant/packages/20_mieter_whg02.yaml
--
/config/packages/ENTITY_INDEX.md-969-- **sensor.wasserdruck** `bar` ‚Äî *Wasserdruck* ‚Äî template  
/config/packages/ENTITY_INDEX.md-970-  `Quelle:` /homeassistant/packages/espaltherma.yaml
/config/packages/ENTITY_INDEX.md:971:- **sensor.whg01_abrechnungsservice_anteil_eur_2025** `‚Ç¨` ‚Äî *whg01_abrechnungsservice_anteil_eur_2025* ‚Äî template  
/config/packages/ENTITY_INDEX.md-972-  `Quelle:` /homeassistant/packages/41_verteilung_2025.yaml
/config/packages/ENTITY_INDEX.md:973:- **sensor.whg01_abwasser_anteil_eur_2025** `‚Ç¨` ‚Äî *whg01_abwasser_anteil_eur_2025* ‚Äî template  
/config/packages/ENTITY_INDEX.md-974-  `Quelle:` /homeassistant/packages/41_verteilung_2025.yaml
/config/packages/ENTITY_INDEX.md:975:- **sensor.whg01_anteil_wohnflaeche_an_gesamtflaeche** `%` ‚Äî *WHG01 ‚Äì Anteil Wohnfl√§che an Gesamtfl√§che* ‚Äî template  
/config/packages/ENTITY_INDEX.md:976:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:977:- **sensor.whg01_betriebskosten_summe_eur_2025** `‚Ç¨` ‚Äî *whg01_betriebskosten_summe_eur_2025* ‚Äî template  
/config/packages/ENTITY_INDEX.md-978-  `Quelle:` /homeassistant/packages/42_abrechnung_2025.yaml
/config/packages/ENTITY_INDEX.md:979:- **sensor.whg01_fixkosten_gesamt_jahr** `‚Ç¨` ‚Äî *WHG01 ‚Äì Fixkosten gesamt [‚Ç¨/Jahr]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:980:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:981:- **sensor.whg01_fixkosten_gesamt_monat** `‚Ç¨` ‚Äî *WHG01 ‚Äì Fixkosten gesamt [‚Ç¨/Monat]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:982:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:983:- **sensor.whg01_grundsteuer_anteil_eur_2025** `‚Ç¨` ‚Äî *whg01_grundsteuer_anteil_eur_2025* ‚Äî template  
/config/packages/ENTITY_INDEX.md-984-  `Quelle:` /homeassistant/packages/41_verteilung_2025.yaml
/config/packages/ENTITY_INDEX.md:985:- **sensor.whg01_kosten_abrechnungsservice_jahr** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Abrechnungsservice [‚Ç¨/Jahr]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:986:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:987:- **sensor.whg01_kosten_abrechnungsservice_monat** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Abrechnungsservice [‚Ç¨/Monat]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:988:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:989:- **sensor.whg01_kosten_abwasser_grundpreis_jahr** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Abwasser Grundpreis [‚Ç¨/Jahr]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:990:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:991:- **sensor.whg01_kosten_abwasser_grundpreis_monat** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Abwasser Grundpreis [‚Ç¨/Monat]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:992:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:993:- **sensor.whg01_kosten_gebaeudeversicherung_jahr** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Geb√§udeversicherung [‚Ç¨/Jahr]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:994:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:995:- **sensor.whg01_kosten_gebaeudeversicherung_monat** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Geb√§udeversicherung [‚Ç¨/Monat]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:996:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:997:- **sensor.whg01_kosten_grundsteuer_jahr** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Grundsteuer [‚Ç¨/Jahr]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:998:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:999:- **sensor.whg01_kosten_grundsteuer_monat** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Grundsteuer [‚Ç¨/Monat]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1000:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:1001:- **sensor.whg01_kosten_muellabfuhr_monat** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten M√ºllabfuhr [‚Ç¨/Monat]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1002:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:1003:- **sensor.whg01_kosten_muellabfuuh_jahr** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten M√ºllabfuuh [‚Ç¨/Jahr]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1004:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:1005:- **sensor.whg01_kosten_regenwasser_jahr** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Regenwasser [‚Ç¨/Jahr]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1006:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:1007:- **sensor.whg01_kosten_regenwasser_monat** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Regenwasser [‚Ç¨/Monat]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1008:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:1009:- **sensor.whg01_kosten_strom_grundgebuehr_jahr** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Strom Grundgeb√ºhr [‚Ç¨/Jahr]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1010:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:1011:- **sensor.whg01_kosten_strom_grundgebuehr_monat** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Strom Grundgeb√ºhr [‚Ç¨/Monat]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1012:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:1013:- **sensor.whg01_kosten_wartung_heizung_jahr** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Wartung Heizung [‚Ç¨/Jahr]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1014:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:1015:- **sensor.whg01_kosten_wartung_heizung_monat** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Wartung Heizung [‚Ç¨/Monat]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1016:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:1017:- **sensor.whg01_kosten_wasser_grundpreis_jahr** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Wasser Grundpreis [‚Ç¨/Jahr]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1018:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:1019:- **sensor.whg01_kosten_wasser_grundpreis_monat** `‚Ç¨` ‚Äî *WHG01 ‚Äì Kosten Wasser Grundpreis [‚Ç¨/Monat]* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1020:  `Quelle:` /homeassistant/packages/whg01_kosten.yaml
/config/packages/ENTITY_INDEX.md:1021:- **sensor.whg01_kw_eich_ablauf** ‚Äî *whg01_kw_eich_ablauf* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1022:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:1023:- **sensor.whg01_muell_anteil_eur_2025** `‚Ç¨` ‚Äî *whg01_muell_anteil_eur_2025* ‚Äî template  
/config/packages/ENTITY_INDEX.md-1024-  `Quelle:` /homeassistant/packages/41_verteilung_2025.yaml
/config/packages/ENTITY_INDEX.md:1025:- **sensor.whg01_niederschlagswasser_anteil_eur_2025** `‚Ç¨` ‚Äî *whg01_niederschlagswasser_anteil_eur_2025* ‚Äî template  
/config/packages/ENTITY_INDEX.md-1026-  `Quelle:` /homeassistant/packages/41_verteilung_2025.yaml
/config/packages/ENTITY_INDEX.md:1027:- **sensor.whg01_strom_eich_ablauf** ‚Äî *whg01_strom_eich_ablauf* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1028:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:1029:- **sensor.whg01_strom_grundpreis_anteil_eur_2025** `‚Ç¨` ‚Äî *whg01_strom_grundpreis_anteil_eur_2025* ‚Äî template  
/config/packages/ENTITY_INDEX.md-1030-  `Quelle:` /homeassistant/packages/41_verteilung_2025.yaml
/config/packages/ENTITY_INDEX.md:1031:- **sensor.whg01_strom_variabel_anteil_eur_2025** `‚Ç¨` ‚Äî *whg01_strom_variabel_anteil_eur_2025* ‚Äî template  
/config/packages/ENTITY_INDEX.md-1032-  `Quelle:` /homeassistant/packages/41_verteilung_2025.yaml
/config/packages/ENTITY_INDEX.md:1033:- **sensor.whg01_versicherung_anteil_eur_2025** `‚Ç¨` ‚Äî *whg01_versicherung_anteil_eur_2025* ‚Äî template  
/config/packages/ENTITY_INDEX.md-1034-  `Quelle:` /homeassistant/packages/41_verteilung_2025.yaml
/config/packages/ENTITY_INDEX.md:1035:- **sensor.whg01_wartung_heizung_anteil_eur_2025** `‚Ç¨` ‚Äî *whg01_wartung_heizung_anteil_eur_2025* ‚Äî template  
/config/packages/ENTITY_INDEX.md-1036-  `Quelle:` /homeassistant/packages/41_verteilung_2025.yaml
/config/packages/ENTITY_INDEX.md:1037:- **sensor.whg01_wasser_anteil_eur_2025** `‚Ç¨` ‚Äî *whg01_wasser_anteil_eur_2025* ‚Äî template  
/config/packages/ENTITY_INDEX.md-1038-  `Quelle:` /homeassistant/packages/41_verteilung_2025.yaml
/config/packages/ENTITY_INDEX.md:1039:- **sensor.whg01_wasser_kalt_m3_month** `kWh` ‚Äî *Whg01 Wasser Kalt M3 Month* ‚Äî utility_meter | cycle=monthly | source=sensor.whg01_wasserzaehler_total_m3_kalt  
/config/packages/ENTITY_INDEX.md:1040:  `Quelle:` /homeassistant/packages/wasser_whg01.yaml
/config/packages/ENTITY_INDEX.md:1041:- **sensor.whg01_wasser_kalt_m3_today** `kWh` ‚Äî *Whg01 Wasser Kalt M3 Today* ‚Äî utility_meter | cycle=daily | source=sensor.whg01_wasserzaehler_total_m3_kalt  
/config/packages/ENTITY_INDEX.md:1042:  `Quelle:` /homeassistant/packages/wasser_whg01.yaml
/config/packages/ENTITY_INDEX.md:1043:- **sensor.whg01_wasser_kalt_m3_year** `kWh` ‚Äî *Whg01 Wasser Kalt M3 Year* ‚Äî utility_meter | cycle=yearly | source=sensor.whg01_wasserzaehler_total_m3_kalt  
/config/packages/ENTITY_INDEX.md:1044:  `Quelle:` /homeassistant/packages/wasser_whg01.yaml
/config/packages/ENTITY_INDEX.md:1045:- **sensor.whg01_wasser_warm_m3_month** `kWh` ‚Äî *Whg01 Wasser Warm M3 Month* ‚Äî utility_meter | cycle=monthly | source=sensor.whg01_wasserzaehler_total_m3_warm  
/config/packages/ENTITY_INDEX.md:1046:  `Quelle:` /homeassistant/packages/wasser_whg01.yaml
/config/packages/ENTITY_INDEX.md:1047:- **sensor.whg01_wasser_warm_m3_today** `kWh` ‚Äî *Whg01 Wasser Warm M3 Today* ‚Äî utility_meter | cycle=daily | source=sensor.whg01_wasserzaehler_total_m3_warm  
/config/packages/ENTITY_INDEX.md:1048:  `Quelle:` /homeassistant/packages/wasser_whg01.yaml
/config/packages/ENTITY_INDEX.md:1049:- **sensor.whg01_wasser_warm_m3_year** `kWh` ‚Äî *Whg01 Wasser Warm M3 Year* ‚Äî utility_meter | cycle=yearly | source=sensor.whg01_wasserzaehler_total_m3_warm  
/config/packages/ENTITY_INDEX.md:1050:  `Quelle:` /homeassistant/packages/wasser_whg01.yaml
/config/packages/ENTITY_INDEX.md:1051:- **sensor.whg01_wmz_eich_ablauf** ‚Äî *whg01_wmz_eich_ablauf* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1052:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md:1053:- **sensor.whg01_ww_eich_ablauf** ‚Äî *whg01_ww_eich_ablauf* ‚Äî template  
/config/packages/ENTITY_INDEX.md:1054:  `Quelle:` /homeassistant/packages/31_zaehler_whg01.yaml
/config/packages/ENTITY_INDEX.md-1055-- **sensor.whg02_abrechnungsservice_anteil_eur_2025** `‚Ç¨` ‚Äî *whg02_abrechnungsservice_anteil_eur_2025* ‚Äî template  
/config/packages/ENTITY_INDEX.md-1056-  `Quelle:` /homeassistant/packages/41_verteilung_2025.yaml
--
/config/packages/20_mieter_whg01.yaml:1:# /config/packages/20_mieter_whg01.yaml
/config/packages/20_mieter_whg01.yaml-2-# Mieterstammdaten ‚Äì Wohnung 01 (zeitlos)
/config/packages/20_mieter_whg01.yaml-3-
/config/packages/20_mieter_whg01.yaml-4-input_text:
/config/packages/20_mieter_whg01.yaml:5:  whg01_mieter_vorname:
/config/packages/20_mieter_whg01.yaml:6:    name: "WHG01 ‚Äì Vorname"
/config/packages/20_mieter_whg01.yaml-7-    max: 64
/config/packages/20_mieter_whg01.yaml:8:  whg01_mieter_nachname:
/config/packages/20_mieter_whg01.yaml:9:    name: "WHG01 ‚Äì Nachname"
/config/packages/20_mieter_whg01.yaml-10-    max: 64
/config/packages/20_mieter_whg01.yaml:11:  whg01_phone:
/config/packages/20_mieter_whg01.yaml:12:    name: "WHG01 ‚Äì Telefon"
/config/packages/20_mieter_whg01.yaml-13-    max: 20
/config/packages/20_mieter_whg01.yaml:14:  whg01_tenant_email:
/config/packages/20_mieter_whg01.yaml:15:    name: "WHG01 ‚Äì E-Mail"
/config/packages/20_mieter_whg01.yaml-16-    max: 120
/config/packages/20_mieter_whg01.yaml:17:  whg01_notizen:
/config/packages/20_mieter_whg01.yaml:18:    name: "WHG01 ‚Äì Notizen"
/config/packages/20_mieter_whg01.yaml-19-    max: 240
/config/packages/20_mieter_whg01.yaml-20-
/config/packages/20_mieter_whg01.yaml-21-input_number:
/config/packages/20_mieter_whg01.yaml:22:  whg01_wohnflaeche_m2:
/config/packages/20_mieter_whg01.yaml:23:    name: "WHG01 ‚Äì Wohnfl√§che [m¬≤]"
/config/packages/20_mieter_whg01.yaml-24-    min: 0
/config/packages/20_mieter_whg01.yaml-25-    max: 1000
--
/config/packages/20_mieter_whg01.yaml-27-    mode: box
/config/packages/20_mieter_whg01.yaml-28-    unit_of_measurement: "m¬≤"
/config/packages/20_mieter_whg01.yaml:29:  whg01_personen:
/config/packages/20_mieter_whg01.yaml:30:    name: "WHG01 ‚Äì Personen [Anzahl]"
/config/packages/20_mieter_whg01.yaml-31-    min: 0
/config/packages/20_mieter_whg01.yaml-32-    max: 20
--
/config/packages/20_mieter_whg01.yaml-34-    mode: box
/config/packages/20_mieter_whg01.yaml-35-    unit_of_measurement: "Personen"
/config/packages/20_mieter_whg01.yaml:36:  whg01_kaution_eur:
/config/packages/20_mieter_whg01.yaml:37:    name: "WHG01 ‚Äì Kaution [‚Ç¨]"
/config/packages/20_mieter_whg01.yaml-38-    min: 0
/config/packages/20_mieter_whg01.yaml-39-    max: 100000
--
/config/packages/20_mieter_whg01.yaml-43-
/config/packages/20_mieter_whg01.yaml-44-input_datetime:
/config/packages/20_mieter_whg01.yaml:45:  whg01_einzug:
/config/packages/20_mieter_whg01.yaml:46:    name: "WHG01 ‚Äì Mietbeginn"
/config/packages/20_mieter_whg01.yaml-47-    has_date: true
/config/packages/20_mieter_whg01.yaml-48-    has_time: false
/config/packages/20_mieter_whg01.yaml:49:  whg01_auszug:
/config/packages/20_mieter_whg01.yaml:50:    name: "WHG01 ‚Äì Mietende"
/config/packages/20_mieter_whg01.yaml-51-    has_date: true
/config/packages/20_mieter_whg01.yaml-52-    has_time: false
/config/packages/20_mieter_whg01.yaml-53-
/config/packages/20_mieter_whg01.yaml-54-input_boolean:
/config/packages/20_mieter_whg01.yaml:55:  whg01_notify_verbrauch_monatlich:
/config/packages/20_mieter_whg01.yaml:56:    name: "WHG01 ‚Äì Monatsbenachrichtigung Verbrauch"
/config/packages/20_mieter_whg01.yaml:57:  whg01_notify_enabled:
/config/packages/20_mieter_whg01.yaml:58:    name: "WHG01 ‚Äì Monatsbenachrichtigung Verbrauch"
/config/packages/20_mieter_whg01.yaml-59-    icon: mdi:message-processing
/config/packages/20_mieter_whg01.yaml-60-
--
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:1:# /config/packages/42_abrechnung_2025_whg01_wasser.yaml
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:2:# WHG01 Wasser: MQTT-Total ‚Üí Verbr√§uche (Tag/Monat/Jahr) ‚Üí Jahres-‚Ç¨ ; Fallback auf manuelle Eingaben
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-3-
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-4-mqtt:
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-5-  sensor:
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:6:    - name: "whg01_wasser_total_m3"
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:7:      unique_id: whg01_wasser_total_m3
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:8:      state_topic: "wmbusmeters/Wasserzaehler_Whg01"
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-9-      value_template: "{{ value_json.total_m3 | float(0) }}"
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-10-      unit_of_measurement: "m¬≥"
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-11-      device_class: water
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-12-      state_class: total_increasing
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:13:      json_attributes_topic: "wmbusmeters/Wasserzaehler_Whg01"
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-14-
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-15-utility_meter:
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:16:  whg01_wasser_m3_year_2025:
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:17:    name: "WHG01 Wasser Jahr 2025"
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:18:    source: sensor.whg01_wasser_total_m3
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-19-    cycle: yearly
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-20-
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-21-# Manuelle Fallback-Felder (nur benutzen, wenn Utility-Meter ausf√§llt)
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-22-input_number:
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:23:  whg01_wasser_start_2025_m3:
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:24:    name: "WHG01 Wasser Start 2025 [m¬≥]"
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-25-    min: 0
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-26-    max: 100000
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-27-    step: 0.001
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-28-    mode: box
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:29:  whg01_wasser_end_2025_m3:
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:30:    name: "WHG01 Wasser Ende 2025 [m¬≥]"
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-31-    min: 0
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-32-    max: 100000
--
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-37-  - sensor:
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-38-      # Jahresverbrauch m¬≥: bevorzugt Utility-Meter, sonst end-start
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:39:      - name: "whg01_wasser_verbrauch_2025_m3"
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:40:        unique_id: whg01_wasser_verbrauch_2025_m3
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-41-        unit_of_measurement: "m¬≥"
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-42-        state: >
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:43:          {% set um = states('sensor.whg01_wasser_m3_year_2025') %}
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-44-          {% if um not in ['unknown','unavailable',''] %}
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-45-            {{ um | float(0) }}
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-46-          {% else %}
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:47:            {{ (states('input_number.whg01_wasser_end_2025_m3')|float(0)
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:48:               - states('input_number.whg01_wasser_start_2025_m3')|float(0)) | max(0) }}
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-49-          {% endif %}
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-50-
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-51-      # Jahreskosten in ‚Ç¨ (variabel = Wasser + Abwasser)
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:52:      - name: "whg01_wasser_kosten_2025_eur"
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:53:        unique_id: whg01_wasser_kosten_2025_eur
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-54-        unit_of_measurement: "‚Ç¨"
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-55-        state: >
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:56:          {% set m3 = states('sensor.whg01_wasser_verbrauch_2025_m3')|float(0) %}
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-57-          {% set p_w = states('input_number.haus_kosten_wasser_arbeitspreis_eur_m3')|float(0) %}
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-58-          {% set p_a = states('input_number.haus_kosten_abwasser_arbeitspreis_eur_m3')|float(0) %}
--
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-60-        attributes:
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-61-          quelle_verbrauch: >
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:62:            {% set um = states('sensor.whg01_wasser_m3_year_2025') %}
/config/packages/42_abrechnung_2025_whg01_wasser.yaml-63-            {{ 'utility_meter' if um not in ['unknown','unavailable',''] else 'manuell (end-start)' }}
/config/packages/42_abrechnung_2025_whg01_wasser.yaml:64:          mqtt_topic: "wmbusmeters/Wasserzaehler_Whg01"
--
/config/packages/whg01_kosten.yaml:1:# /config/packages/whg01_kosten_fix.yaml
/config/packages/whg01_kosten.yaml-2-#
/config/packages/whg01_kosten.yaml-3-# Wohnung 01 ‚Äì Verteilung fixer Betriebskosten (Jahr/Monat) gem. Vorgaben
/config/packages/whg01_kosten.yaml:4:# - Strom Grundgeb√ºhr: √ºber Haus-Sensor je Verteilstelle (Jahr) ‚Äì WHG01 = 1 Verteilstelle
/config/packages/whg01_kosten.yaml-5-# - Wasser/Abwasser/M√ºll/Versicherung/Grundsteuer/Wartung/Regenwasser: Anteil nach Wohnfl√§che
/config/packages/whg01_kosten.yaml-6-# - Abrechnungsservice: gleichm√§√üig je Wohnung (hier: 4 Wohnungen; anpassbar √ºber KONSTANTE_WOHNUNGEN)
--
/config/packages/whg01_kosten.yaml-8-# Ben√∂tigte Eingangs-Entities (m√ºssen existieren):
/config/packages/whg01_kosten.yaml-9-#   - sensor.haus_kosten_strom_grundgebuehr_je_verteilstelle_2025_eur_jahr
/config/packages/whg01_kosten.yaml:10:#   - input_number.whg01_wohnflaeche_m2
/config/packages/whg01_kosten.yaml-11-#   - input_number.haus_nutzflaeche_m2_gesamt
/config/packages/whg01_kosten.yaml-12-#   - input_number.haus_betriebskosten_wasser_grundpreis_eur
--
/config/packages/whg01_kosten.yaml-22-  - sensor:
/config/packages/whg01_kosten.yaml-23-      # ---------------------------
/config/packages/whg01_kosten.yaml:24:      # Hilfswerte: Fl√§chen-Anteil WHG01
/config/packages/whg01_kosten.yaml-25-      # ---------------------------
/config/packages/whg01_kosten.yaml:26:      - name: "WHG01 ‚Äì Anteil Wohnfl√§che an Gesamtfl√§che"
/config/packages/whg01_kosten.yaml:27:        unique_id: whg01_anteil_flaeche_ratio
/config/packages/whg01_kosten.yaml-28-        unit_of_measurement: "%"
/config/packages/whg01_kosten.yaml-29-        state: >
/config/packages/whg01_kosten.yaml:30:          {% set whg = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/whg01_kosten.yaml-31-          {% set ges = states('input_number.haus_nutzflaeche_m2_gesamt')|float(0) %}
/config/packages/whg01_kosten.yaml-32-          {{ ((whg / ges) * 100) | round(2) if ges > 0 else 0 }}
/config/packages/whg01_kosten.yaml-33-        attributes:
/config/packages/whg01_kosten.yaml-34-          fraction: >
/config/packages/whg01_kosten.yaml:35:            {% set whg = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/whg01_kosten.yaml-36-            {% set ges = states('input_number.haus_nutzflaeche_m2_gesamt')|float(0) %}
/config/packages/whg01_kosten.yaml-37-            {{ (whg / ges) | round(6) if ges > 0 else 0 }}
--
/config/packages/whg01_kosten.yaml-40-      # Strom Grundgeb√ºhr (Jahr/Monat)
/config/packages/whg01_kosten.yaml-41-      # ---------------------------
/config/packages/whg01_kosten.yaml:42:      - name: "WHG01 ‚Äì Kosten Strom Grundgeb√ºhr [‚Ç¨/Jahr]"
/config/packages/whg01_kosten.yaml:43:        unique_id: whg01_kosten_strom_grundgebuehr_eur_jahr
/config/packages/whg01_kosten.yaml-44-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-45-        device_class: monetary
/config/packages/whg01_kosten.yaml-46-        state: "{{ states('sensor.haus_kosten_strom_grundgebuehr_je_verteilstelle_2025_eur_jahr') }}"
/config/packages/whg01_kosten.yaml:47:      - name: "WHG01 ‚Äì Kosten Strom Grundgeb√ºhr [‚Ç¨/Monat]"
/config/packages/whg01_kosten.yaml:48:        unique_id: whg01_kosten_strom_grundgebuehr_eur_monat
/config/packages/whg01_kosten.yaml-49-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-50-        device_class: monetary
--
/config/packages/whg01_kosten.yaml-55-      # Wasser Grundpreis (Jahr/Monat) ‚Äì nach Wohnfl√§che
/config/packages/whg01_kosten.yaml-56-      # ---------------------------
/config/packages/whg01_kosten.yaml:57:      - name: "WHG01 ‚Äì Kosten Wasser Grundpreis [‚Ç¨/Jahr]"
/config/packages/whg01_kosten.yaml:58:        unique_id: whg01_kosten_wasser_grundpreis_eur_jahr
/config/packages/whg01_kosten.yaml-59-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-60-        device_class: monetary
/config/packages/whg01_kosten.yaml-61-        state: >
/config/packages/whg01_kosten.yaml-62-          {% set total = states('input_number.haus_betriebskosten_wasser_grundpreis_eur')|float(0) %}
/config/packages/whg01_kosten.yaml:63:          {% set whg = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/whg01_kosten.yaml-64-          {% set ges = states('input_number.haus_nutzflaeche_m2_gesamt')|float(0) %}
/config/packages/whg01_kosten.yaml-65-          {{ (total * whg / ges) | round(2) if ges > 0 else 0 }}
/config/packages/whg01_kosten.yaml:66:      - name: "WHG01 ‚Äì Kosten Wasser Grundpreis [‚Ç¨/Monat]"
/config/packages/whg01_kosten.yaml:67:        unique_id: whg01_kosten_wasser_grundpreis_eur_monat
/config/packages/whg01_kosten.yaml-68-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-69-        device_class: monetary
/config/packages/whg01_kosten.yaml-70-        state: >
/config/packages/whg01_kosten.yaml:71:          {% set jahr = states('sensor.whg01_kosten_wasser_grundpreis_eur_jahr')|float(0) %}
/config/packages/whg01_kosten.yaml-72-          {{ (jahr / 12) | round(2) }}
/config/packages/whg01_kosten.yaml-73-
--
/config/packages/whg01_kosten.yaml-75-      # Abwasser Grundpreis (Jahr/Monat) ‚Äì nach Wohnfl√§che
/config/packages/whg01_kosten.yaml-76-      # ---------------------------
/config/packages/whg01_kosten.yaml:77:      - name: "WHG01 ‚Äì Kosten Abwasser Grundpreis [‚Ç¨/Jahr]"
/config/packages/whg01_kosten.yaml:78:        unique_id: whg01_kosten_abwasser_grundpreis_eur_jahr
/config/packages/whg01_kosten.yaml-79-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-80-        device_class: monetary
/config/packages/whg01_kosten.yaml-81-        state: >
/config/packages/whg01_kosten.yaml-82-          {% set total = states('input_number.haus_betriebskosten_abwasser_grundpreis_eur')|float(0) %}
/config/packages/whg01_kosten.yaml:83:          {% set whg = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/whg01_kosten.yaml-84-          {% set ges = states('input_number.haus_nutzflaeche_m2_gesamt')|float(0) %}
/config/packages/whg01_kosten.yaml-85-          {{ (total * whg / ges) | round(2) if ges > 0 else 0 }}
/config/packages/whg01_kosten.yaml:86:      - name: "WHG01 ‚Äì Kosten Abwasser Grundpreis [‚Ç¨/Monat]"
/config/packages/whg01_kosten.yaml:87:        unique_id: whg01_kosten_abwasser_grundpreis_eur_monat
/config/packages/whg01_kosten.yaml-88-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-89-        device_class: monetary
/config/packages/whg01_kosten.yaml-90-        state: >
/config/packages/whg01_kosten.yaml:91:          {% set jahr = states('sensor.whg01_kosten_abwasser_grundpreis_eur_jahr')|float(0) %}
/config/packages/whg01_kosten.yaml-92-          {{ (jahr / 12) | round(2) }}
/config/packages/whg01_kosten.yaml-93-
--
/config/packages/whg01_kosten.yaml-95-      # M√ºllabfuhr (Jahr/Monat) ‚Äì nach Wohnfl√§che
/config/packages/whg01_kosten.yaml-96-      # ---------------------------
/config/packages/whg01_kosten.yaml:97:      - name: "WHG01 ‚Äì Kosten M√ºllabfuuh [‚Ç¨/Jahr]"
/config/packages/whg01_kosten.yaml:98:        unique_id: whg01_kosten_muell_eur_jahr
/config/packages/whg01_kosten.yaml-99-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-100-        device_class: monetary
/config/packages/whg01_kosten.yaml-101-        state: >
/config/packages/whg01_kosten.yaml-102-          {% set total = states('input_number.haus_betriebskosten_muellabfuhr_eur')|float(0) %}
/config/packages/whg01_kosten.yaml:103:          {% set whg = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/whg01_kosten.yaml-104-          {% set ges = states('input_number.haus_nutzflaeche_m2_gesamt')|float(0) %}
/config/packages/whg01_kosten.yaml-105-          {{ (total * whg / ges) | round(2) if ges > 0 else 0 }}
/config/packages/whg01_kosten.yaml:106:      - name: "WHG01 ‚Äì Kosten M√ºllabfuhr [‚Ç¨/Monat]"
/config/packages/whg01_kosten.yaml:107:        unique_id: whg01_kosten_muell_eur_monat
/config/packages/whg01_kosten.yaml-108-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-109-        device_class: monetary
/config/packages/whg01_kosten.yaml-110-        state: >
/config/packages/whg01_kosten.yaml:111:          {% set jahr = states('sensor.whg01_kosten_muell_eur_jahr')|float(0) %}
/config/packages/whg01_kosten.yaml-112-          {{ (jahr / 12) | round(2) }}
/config/packages/whg01_kosten.yaml-113-
--
/config/packages/whg01_kosten.yaml-115-      # Geb√§udeversicherung (Jahr/Monat) ‚Äì nach Wohnfl√§che
/config/packages/whg01_kosten.yaml-116-      # ---------------------------
/config/packages/whg01_kosten.yaml:117:      - name: "WHG01 ‚Äì Kosten Geb√§udeversicherung [‚Ç¨/Jahr]"
/config/packages/whg01_kosten.yaml:118:        unique_id: whg01_kosten_gebaeudeversicherung_eur_jahr
/config/packages/whg01_kosten.yaml-119-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-120-        device_class: monetary
/config/packages/whg01_kosten.yaml-121-        state: >
/config/packages/whg01_kosten.yaml-122-          {% set total = states('input_number.haus_kosten_gebaeudeversicherung_eur_jahr')|float(0) %}
/config/packages/whg01_kosten.yaml:123:          {% set whg = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/whg01_kosten.yaml-124-          {% set ges = states('input_number.haus_nutzflaeche_m2_gesamt')|float(0) %}
/config/packages/whg01_kosten.yaml-125-          {{ (total * whg / ges) | round(2) if ges > 0 else 0 }}
/config/packages/whg01_kosten.yaml:126:      - name: "WHG01 ‚Äì Kosten Geb√§udeversicherung [‚Ç¨/Monat]"
/config/packages/whg01_kosten.yaml:127:        unique_id: whg01_kosten_gebaeudeversicherung_eur_monat
/config/packages/whg01_kosten.yaml-128-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-129-        device_class: monetary
/config/packages/whg01_kosten.yaml-130-        state: >
/config/packages/whg01_kosten.yaml:131:          {% set jahr = states('sensor.whg01_kosten_gebaeudeversicherung_eur_jahr')|float(0) %}
/config/packages/whg01_kosten.yaml-132-          {{ (jahr / 12) | round(2) }}
/config/packages/whg01_kosten.yaml-133-
--
/config/packages/whg01_kosten.yaml-135-      # Grundsteuer (Jahr/Monat) ‚Äì nach Wohnfl√§che
/config/packages/whg01_kosten.yaml-136-      # ---------------------------
/config/packages/whg01_kosten.yaml:137:      - name: "WHG01 ‚Äì Kosten Grundsteuer [‚Ç¨/Jahr]"
/config/packages/whg01_kosten.yaml:138:        unique_id: whg01_kosten_grundsteuer_eur_jahr
/config/packages/whg01_kosten.yaml-139-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-140-        device_class: monetary
/config/packages/whg01_kosten.yaml-141-        state: >
/config/packages/whg01_kosten.yaml-142-          {% set total = states('input_number.haus_kosten_grundsteuer_eur_jahr')|float(0) %}
/config/packages/whg01_kosten.yaml:143:          {% set whg = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/whg01_kosten.yaml-144-          {% set ges = states('input_number.haus_nutzflaeche_m2_gesamt')|float(0) %}
/config/packages/whg01_kosten.yaml-145-          {{ (total * whg / ges) | round(2) if ges > 0 else 0 }}
/config/packages/whg01_kosten.yaml:146:      - name: "WHG01 ‚Äì Kosten Grundsteuer [‚Ç¨/Monat]"
/config/packages/whg01_kosten.yaml:147:        unique_id: whg01_kosten_grundsteuer_eur_monat
/config/packages/whg01_kosten.yaml-148-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-149-        device_class: monetary
/config/packages/whg01_kosten.yaml-150-        state: >
/config/packages/whg01_kosten.yaml:151:          {% set jahr = states('sensor.whg01_kosten_grundsteuer_eur_jahr')|float(0) %}
/config/packages/whg01_kosten.yaml-152-          {{ (jahr / 12) | round(2) }}
/config/packages/whg01_kosten.yaml-153-
--
/config/packages/whg01_kosten.yaml-155-      # Wartung Heizung (Jahr/Monat) ‚Äì nach Wohnfl√§che
/config/packages/whg01_kosten.yaml-156-      # ---------------------------
/config/packages/whg01_kosten.yaml:157:      - name: "WHG01 ‚Äì Kosten Wartung Heizung [‚Ç¨/Jahr]"
/config/packages/whg01_kosten.yaml:158:        unique_id: whg01_kosten_wartung_heizung_eur_jahr
/config/packages/whg01_kosten.yaml-159-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-160-        device_class: monetary
/config/packages/whg01_kosten.yaml-161-        state: >
/config/packages/whg01_kosten.yaml-162-          {% set total = states('input_number.haus_betriebskosten_wartung_heizung_eur')|float(0) %}
/config/packages/whg01_kosten.yaml:163:          {% set whg = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/whg01_kosten.yaml-164-          {% set ges = states('input_number.haus_nutzflaeche_m2_gesamt')|float(0) %}
/config/packages/whg01_kosten.yaml-165-          {{ (total * whg / ges) | round(2) if ges > 0 else 0 }}
/config/packages/whg01_kosten.yaml:166:      - name: "WHG01 ‚Äì Kosten Wartung Heizung [‚Ç¨/Monat]"
/config/packages/whg01_kosten.yaml:167:        unique_id: whg01_kosten_wartung_heizung_eur_monat
/config/packages/whg01_kosten.yaml-168-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-169-        device_class: monetary
/config/packages/whg01_kosten.yaml-170-        state: >
/config/packages/whg01_kosten.yaml:171:          {% set jahr = states('sensor.whg01_kosten_wartung_heizung_eur_jahr')|float(0) %}
/config/packages/whg01_kosten.yaml-172-          {{ (jahr / 12) | round(2) }}
/config/packages/whg01_kosten.yaml-173-
--
/config/packages/whg01_kosten.yaml-175-      # Abrechnungsservice (Jahr/Monat) ‚Äì gleichm√§√üig
/config/packages/whg01_kosten.yaml-176-      # ---------------------------
/config/packages/whg01_kosten.yaml:177:      - name: "WHG01 ‚Äì Kosten Abrechnungsservice [‚Ç¨/Jahr]"
/config/packages/whg01_kosten.yaml:178:        unique_id: whg01_kosten_abrechnungsservice_eur_jahr
/config/packages/whg01_kosten.yaml-179-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-180-        device_class: monetary
--
/config/packages/whg01_kosten.yaml-184-          {% set total = states('input_number.haus_betriebskosten_abrechnungsservice_eur')|float(0) %}
/config/packages/whg01_kosten.yaml-185-          {{ (total / KONSTANTE_WOHNUNGEN) | round(2) if KONSTANTE_WOHNUNGEN > 0 else 0 }}
/config/packages/whg01_kosten.yaml:186:      - name: "WHG01 ‚Äì Kosten Abrechnungsservice [‚Ç¨/Monat]"
/config/packages/whg01_kosten.yaml:187:        unique_id: whg01_kosten_abrechnungsservice_eur_monat
/config/packages/whg01_kosten.yaml-188-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-189-        device_class: monetary
/config/packages/whg01_kosten.yaml-190-        state: >
/config/packages/whg01_kosten.yaml:191:          {% set jahr = states('sensor.whg01_kosten_abrechnungsservice_eur_jahr')|float(0) %}
/config/packages/whg01_kosten.yaml-192-          {{ (jahr / 12) | round(2) }}
/config/packages/whg01_kosten.yaml-193-
--
/config/packages/whg01_kosten.yaml-195-      # Regenwasser (Jahr/Monat) ‚Äì nach Wohnfl√§che
/config/packages/whg01_kosten.yaml-196-      # ---------------------------
/config/packages/whg01_kosten.yaml:197:      - name: "WHG01 ‚Äì Kosten Regenwasser [‚Ç¨/Jahr]"
/config/packages/whg01_kosten.yaml:198:        unique_id: whg01_kosten_regenwasser_eur_jahr
/config/packages/whg01_kosten.yaml-199-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-200-        device_class: monetary
/config/packages/whg01_kosten.yaml-201-        state: >
/config/packages/whg01_kosten.yaml-202-          {% set total = states('input_number.haus_kosten_regenwasser_eur_jahr')|float(0) %}
/config/packages/whg01_kosten.yaml:203:          {% set whg = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/whg01_kosten.yaml-204-          {% set ges = states('input_number.haus_nutzflaeche_m2_gesamt')|float(0) %}
/config/packages/whg01_kosten.yaml-205-          {{ (total * whg / ges) | round(2) if ges > 0 else 0 }}
/config/packages/whg01_kosten.yaml:206:      - name: "WHG01 ‚Äì Kosten Regenwasser [‚Ç¨/Monat]"
/config/packages/whg01_kosten.yaml:207:        unique_id: whg01_kosten_regenwasser_eur_monat
/config/packages/whg01_kosten.yaml-208-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-209-        device_class: monetary
/config/packages/whg01_kosten.yaml-210-        state: >
/config/packages/whg01_kosten.yaml:211:          {% set jahr = states('sensor.whg01_kosten_regenwasser_eur_jahr')|float(0) %}
/config/packages/whg01_kosten.yaml-212-          {{ (jahr / 12) | round(2) }}
/config/packages/whg01_kosten.yaml-213-
/config/packages/whg01_kosten.yaml-214-      # ---------------------------
/config/packages/whg01_kosten.yaml:215:      # SUMMEN (Jahr/Monat) ‚Äì fixe Posten WHG01
/config/packages/whg01_kosten.yaml-216-      # ---------------------------
/config/packages/whg01_kosten.yaml:217:      - name: "WHG01 ‚Äì Fixkosten gesamt [‚Ç¨/Jahr]"
/config/packages/whg01_kosten.yaml:218:        unique_id: whg01_kosten_fix_summe_eur_jahr
/config/packages/whg01_kosten.yaml-219-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-220-        device_class: monetary
/config/packages/whg01_kosten.yaml-221-        state: >
/config/packages/whg01_kosten.yaml-222-          {{ (
/config/packages/whg01_kosten.yaml:223:            states('sensor.whg01_kosten_strom_grundgebuehr_eur_jahr')|float(0) +
/config/packages/whg01_kosten.yaml:224:            states('sensor.whg01_kosten_wasser_grundpreis_eur_jahr')|float(0) +
/config/packages/whg01_kosten.yaml:225:            states('sensor.whg01_kosten_abwasser_grundpreis_eur_jahr')|float(0) +
/config/packages/whg01_kosten.yaml:226:            states('sensor.whg01_kosten_muell_eur_jahr')|float(0) +
/config/packages/whg01_kosten.yaml:227:            states('sensor.whg01_kosten_gebaeudeversicherung_eur_jahr')|float(0) +
/config/packages/whg01_kosten.yaml:228:            states('sensor.whg01_kosten_grundsteuer_eur_jahr')|float(0) +
/config/packages/whg01_kosten.yaml:229:            states('sensor.whg01_kosten_wartung_heizung_eur_jahr')|float(0) +
/config/packages/whg01_kosten.yaml:230:            states('sensor.whg01_kosten_abrechnungsservice_eur_jahr')|float(0) +
/config/packages/whg01_kosten.yaml:231:            states('sensor.whg01_kosten_regenwasser_eur_jahr')|float(0)
/config/packages/whg01_kosten.yaml-232-          ) | round(2) }}
/config/packages/whg01_kosten.yaml:233:      - name: "WHG01 ‚Äì Fixkosten gesamt [‚Ç¨/Monat]"
/config/packages/whg01_kosten.yaml:234:        unique_id: whg01_kosten_fix_summe_eur_monat
/config/packages/whg01_kosten.yaml-235-        unit_of_measurement: "‚Ç¨"
/config/packages/whg01_kosten.yaml-236-        device_class: monetary
/config/packages/whg01_kosten.yaml-237-        state: >
/config/packages/whg01_kosten.yaml:238:          {{ (states('sensor.whg01_kosten_fix_summe_eur_jahr')|float(0) / 12) | round(2) }}
--
/config/packages/wasser_whg01.yaml:1:# /config/packages/wasser_whg01.yaml
/config/packages/wasser_whg01.yaml-2-# Annahme: wmbusmeters Add-on publiziert je Z√§hler ein JSON nach:
/config/packages/wasser_whg01.yaml-3-#   Topic: wmbusmeters/<METER_NAME>
/config/packages/wasser_whg01.yaml:4:# F√ºr whg01 verwenden wir:
/config/packages/wasser_whg01.yaml:5:#   - Kalt:  METER_NAME = Wasserzaehler_whg01_kalt
/config/packages/wasser_whg01.yaml:6:#   - Warm:  METER_NAME = Wasserzaehler_whg01_warm
/config/packages/wasser_whg01.yaml-7-#
/config/packages/wasser_whg01.yaml-8-# Bitte im Add-on unter conf.meters[...] f√ºr jeden Z√§hler "name:" exakt so setzen,
--
/config/packages/wasser_whg01.yaml-12-  sensor:
/config/packages/wasser_whg01.yaml-13-    # =======================
/config/packages/wasser_whg01.yaml:14:    # WHG01 ‚Äì KALT (Gesamt)
/config/packages/wasser_whg01.yaml-15-    # =======================
/config/packages/wasser_whg01.yaml:16:    - object_id: whg01_wasserzaehler_total_m3_kalt
/config/packages/wasser_whg01.yaml:17:      unique_id: whg01_wasserzaehler_total_m3_kalt
/config/packages/wasser_whg01.yaml-18-      name: "Whg 01 ‚Äì Wasser KALT: Gesamt [m¬≥]"
/config/packages/wasser_whg01.yaml:19:      state_topic: "wmbusmeters/Wasserzaehler_whg01_kalt"
/config/packages/wasser_whg01.yaml-20-      value_template: >-
/config/packages/wasser_whg01.yaml-21-        {% set s = value_json %}
--
/config/packages/wasser_whg01.yaml-30-          {{ s.consumption_at_reporting_date_m3 | float }}
/config/packages/wasser_whg01.yaml-31-        {% else %}
/config/packages/wasser_whg01.yaml:32:          {{ states('sensor.whg01_wasserzaehler_total_m3_kalt') }}
/config/packages/wasser_whg01.yaml-33-        {% endif %}
/config/packages/wasser_whg01.yaml-34-      unit_of_measurement: "m¬≥"
--
/config/packages/wasser_whg01.yaml-38-
/config/packages/wasser_whg01.yaml-39-    # Optional: Durchfluss (m¬≥/h) ‚Äì falls vorhanden
/config/packages/wasser_whg01.yaml:40:    - object_id: whg01_wasserzaehler_flow_m3h_kalt
/config/packages/wasser_whg01.yaml:41:      unique_id: whg01_wasserzaehler_flow_m3h_kalt
/config/packages/wasser_whg01.yaml-42-      name: "Whg 01 ‚Äì Wasser KALT: Durchfluss [m¬≥/h]"
/config/packages/wasser_whg01.yaml:43:      state_topic: "wmbusmeters/Wasserzaehler_whg01_kalt"
/config/packages/wasser_whg01.yaml-44-      value_template: >-
/config/packages/wasser_whg01.yaml-45-        {% if value_json.flow_m3h is defined %}
--
/config/packages/wasser_whg01.yaml-48-          {{ (value_json.flow_lh | float) / 1000 }}
/config/packages/wasser_whg01.yaml-49-        {% else %}
/config/packages/wasser_whg01.yaml:50:          {{ states('sensor.whg01_wasserzaehler_flow_m3h_kalt') }}
/config/packages/wasser_whg01.yaml-51-        {% endif %}
/config/packages/wasser_whg01.yaml-52-      unit_of_measurement: "m¬≥/h"
--
/config/packages/wasser_whg01.yaml-56-
/config/packages/wasser_whg01.yaml-57-    # =======================
/config/packages/wasser_whg01.yaml:58:    # WHG01 ‚Äì WARM (Gesamt)
/config/packages/wasser_whg01.yaml-59-    # =======================
/config/packages/wasser_whg01.yaml:60:    - object_id: whg01_wasserzaehler_total_m3_warm
/config/packages/wasser_whg01.yaml:61:      unique_id: whg01_wasserzaehler_total_m3_warm
/config/packages/wasser_whg01.yaml-62-      name: "Whg 01 ‚Äì Wasser WARM: Gesamt [m¬≥]"
/config/packages/wasser_whg01.yaml:63:      state_topic: "wmbusmeters/Wasserzaehler_whg01_warm"
/config/packages/wasser_whg01.yaml-64-      value_template: >-
/config/packages/wasser_whg01.yaml-65-        {% set s = value_json %}
--
/config/packages/wasser_whg01.yaml-73-          {{ s.consumption_at_reporting_date_m3 | float }}
/config/packages/wasser_whg01.yaml-74-        {% else %}
/config/packages/wasser_whg01.yaml:75:          {{ states('sensor.whg01_wasserzaehler_total_m3_warm') }}
/config/packages/wasser_whg01.yaml-76-        {% endif %}
/config/packages/wasser_whg01.yaml-77-      unit_of_measurement: "m¬≥"
--
/config/packages/wasser_whg01.yaml-81-
/config/packages/wasser_whg01.yaml-82-    # Optional: Durchfluss (m¬≥/h) ‚Äì falls vorhanden
/config/packages/wasser_whg01.yaml:83:    - object_id: whg01_wasserzaehler_flow_m3h_warm
/config/packages/wasser_whg01.yaml:84:      unique_id: whg01_wasserzaehler_flow_m3h_warm
/config/packages/wasser_whg01.yaml-85-      name: "Whg 01 ‚Äì Wasser WARM: Durchfluss [m¬≥/h]"
/config/packages/wasser_whg01.yaml:86:      state_topic: "wmbusmeters/Wasserzaehler_whg01_warm"
/config/packages/wasser_whg01.yaml-87-      value_template: >-
/config/packages/wasser_whg01.yaml-88-        {% if value_json.flow_m3h is defined %}
--
/config/packages/wasser_whg01.yaml-91-          {{ (value_json.flow_lh | float) / 1000 }}
/config/packages/wasser_whg01.yaml-92-        {% else %}
/config/packages/wasser_whg01.yaml:93:          {{ states('sensor.whg01_wasserzaehler_flow_m3h_warm') }}
/config/packages/wasser_whg01.yaml-94-        {% endif %}
/config/packages/wasser_whg01.yaml-95-      unit_of_measurement: "m¬≥/h"
--
/config/packages/wasser_whg01.yaml-99-
/config/packages/wasser_whg01.yaml-100-    # (optional) RSSI ‚Äì einsehbar pro Z√§hler
/config/packages/wasser_whg01.yaml:101:    - object_id: whg01_wasserzaehler_rssi_dbm_kalt
/config/packages/wasser_whg01.yaml:102:      unique_id: whg01_wasserzaehler_rssi_dbm_kalt
/config/packages/wasser_whg01.yaml-103-      name: "Whg 01 ‚Äì Wasser KALT: RSSI [dBm]"
/config/packages/wasser_whg01.yaml:104:      state_topic: "wmbusmeters/Wasserzaehler_whg01_kalt"
/config/packages/wasser_whg01.yaml-105-      value_template: "{{ value_json.rssi_dbm | float(default=none) }}"
/config/packages/wasser_whg01.yaml-106-      unit_of_measurement: "dBm"
--
/config/packages/wasser_whg01.yaml-108-      icon: mdi:signal
/config/packages/wasser_whg01.yaml-109-
/config/packages/wasser_whg01.yaml:110:    - object_id: whg01_wasserzaehler_rssi_dbm_warm
/config/packages/wasser_whg01.yaml:111:      unique_id: whg01_wasserzaehler_rssi_dbm_warm
/config/packages/wasser_whg01.yaml-112-      name: "Whg 01 ‚Äì Wasser WARM: RSSI [dBm]"
/config/packages/wasser_whg01.yaml:113:      state_topic: "wmbusmeters/Wasserzaehler_whg01_warm"
/config/packages/wasser_whg01.yaml-114-      value_template: "{{ value_json.rssi_dbm | float(default=none) }}"
/config/packages/wasser_whg01.yaml-115-      unit_of_measurement: "dBm"
--
/config/packages/wasser_whg01.yaml-120-utility_meter:
/config/packages/wasser_whg01.yaml-121-  # KALT
/config/packages/wasser_whg01.yaml:122:  whg01_wasser_kalt_m3_today:
/config/packages/wasser_whg01.yaml:123:    source: sensor.whg01_wasserzaehler_total_m3_kalt
/config/packages/wasser_whg01.yaml-124-    cycle: daily
/config/packages/wasser_whg01.yaml:125:  whg01_wasser_kalt_m3_month:
/config/packages/wasser_whg01.yaml:126:    source: sensor.whg01_wasserzaehler_total_m3_kalt
/config/packages/wasser_whg01.yaml-127-    cycle: monthly
/config/packages/wasser_whg01.yaml:128:  whg01_wasser_kalt_m3_year:
/config/packages/wasser_whg01.yaml:129:    source: sensor.whg01_wasserzaehler_total_m3_kalt
/config/packages/wasser_whg01.yaml-130-    cycle: yearly
/config/packages/wasser_whg01.yaml-131-
/config/packages/wasser_whg01.yaml-132-  # WARM
/config/packages/wasser_whg01.yaml:133:  whg01_wasser_warm_m3_today:
/config/packages/wasser_whg01.yaml:134:    source: sensor.whg01_wasserzaehler_total_m3_warm
/config/packages/wasser_whg01.yaml-135-    cycle: daily
/config/packages/wasser_whg01.yaml:136:  whg01_wasser_warm_m3_month:
/config/packages/wasser_whg01.yaml:137:    source: sensor.whg01_wasserzaehler_total_m3_warm
/config/packages/wasser_whg01.yaml-138-    cycle: monthly
/config/packages/wasser_whg01.yaml:139:  whg01_wasser_warm_m3_year:
/config/packages/wasser_whg01.yaml:140:    source: sensor.whg01_wasserzaehler_total_m3_warm
/config/packages/wasser_whg01.yaml-141-    cycle: yearly
--
/config/packages/41_verteilung_2025.yaml-1-# /config/packages/41_verteilung_2025.yaml
/config/packages/41_verteilung_2025.yaml:2:# Verteilung 2025 ‚Äì Anteile Haus -> Wohnungen (WHG01..WHG04)
/config/packages/41_verteilung_2025.yaml-3-
/config/packages/41_verteilung_2025.yaml-4-template:
--
/config/packages/41_verteilung_2025.yaml-11-        state: >-
/config/packages/41_verteilung_2025.yaml-12-          {{ (
/config/packages/41_verteilung_2025.yaml:13:            states('input_number.whg01_wohnflaeche_m2')|float(0) +
/config/packages/41_verteilung_2025.yaml-14-            states('input_number.whg02_wohnflaeche_m2')|float(0) +
/config/packages/41_verteilung_2025.yaml-15-            states('input_number.whg03_wohnflaeche_m2')|float(0) +
--
/config/packages/41_verteilung_2025.yaml-20-        state: >-
/config/packages/41_verteilung_2025.yaml-21-          {{ (
/config/packages/41_verteilung_2025.yaml:22:            states('input_number.whg01_personen')|int(0) +
/config/packages/41_verteilung_2025.yaml-23-            states('input_number.whg02_personen')|int(0) +
/config/packages/41_verteilung_2025.yaml-24-            states('input_number.whg03_personen')|int(0) +
--
/config/packages/41_verteilung_2025.yaml-50-
/config/packages/41_verteilung_2025.yaml-51-      # =====================================================================
/config/packages/41_verteilung_2025.yaml:52:      # WHG01
/config/packages/41_verteilung_2025.yaml-53-      # =====================================================================
/config/packages/41_verteilung_2025.yaml-54-      # Wasser/Abwasser nach Personen
/config/packages/41_verteilung_2025.yaml:55:      - name: whg01_wasser_anteil_eur_2025
/config/packages/41_verteilung_2025.yaml-56-        unit_of_measurement: "‚Ç¨"
/config/packages/41_verteilung_2025.yaml-57-        state: >-
/config/packages/41_verteilung_2025.yaml:58:          {% set p   = states('input_number.whg01_personen')|int(0) %}
/config/packages/41_verteilung_2025.yaml-59-          {% set sum = states('sensor.summe_personen')|int(0) %}
/config/packages/41_verteilung_2025.yaml-60-          {% set tot = states('sensor.wasser_gesamt_eur_2025')|float(0) %}
/config/packages/41_verteilung_2025.yaml-61-          {{ (tot * p / sum) | round(2) if sum>0 else 0 }}
/config/packages/41_verteilung_2025.yaml:62:      - name: whg01_abwasser_anteil_eur_2025
/config/packages/41_verteilung_2025.yaml-63-        unit_of_measurement: "‚Ç¨"
/config/packages/41_verteilung_2025.yaml-64-        state: >-
/config/packages/41_verteilung_2025.yaml:65:          {% set p   = states('input_number.whg01_personen')|int(0) %}
/config/packages/41_verteilung_2025.yaml-66-          {% set sum = states('sensor.summe_personen')|int(0) %}
/config/packages/41_verteilung_2025.yaml-67-          {% set tot = states('sensor.abwasser_gesamt_eur_2025')|float(0) %}
--
/config/packages/41_verteilung_2025.yaml-69-
/config/packages/41_verteilung_2025.yaml-70-      # Strom: variabler Anteil nach m¬≤
/config/packages/41_verteilung_2025.yaml:71:      - name: whg01_strom_variabel_anteil_eur_2025
/config/packages/41_verteilung_2025.yaml-72-        unit_of_measurement: "‚Ç¨"
/config/packages/41_verteilung_2025.yaml-73-        state: >-
/config/packages/41_verteilung_2025.yaml:74:          {% set m2  = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/41_verteilung_2025.yaml-75-          {% set sum = states('sensor.summe_wohnflaeche_m2')|float(0) %}
/config/packages/41_verteilung_2025.yaml-76-          {% set tot = states('sensor.strom_variabel_gesamt_eur_2025')|float(0) %}
--
/config/packages/41_verteilung_2025.yaml-78-
/config/packages/41_verteilung_2025.yaml-79-      # Strom-Grundpreis: 1 Verteilstelle je Wohnung
/config/packages/41_verteilung_2025.yaml:80:      - name: whg01_strom_grundpreis_anteil_eur_2025
/config/packages/41_verteilung_2025.yaml-81-        unit_of_measurement: "‚Ç¨"
/config/packages/41_verteilung_2025.yaml-82-        state: "{{ states('sensor.strom_grundpreis_je_stelle_eur_2025')|float(0) }}"
/config/packages/41_verteilung_2025.yaml-83-
/config/packages/41_verteilung_2025.yaml-84-      # Grundsteuer/Versicherung/Niederschlagswasser nach m¬≤, M√ºll nach Personen
/config/packages/41_verteilung_2025.yaml:85:      - name: whg01_grundsteuer_anteil_eur_2025
/config/packages/41_verteilung_2025.yaml-86-        unit_of_measurement: "‚Ç¨"
/config/packages/41_verteilung_2025.yaml-87-        state: >-
/config/packages/41_verteilung_2025.yaml-88-          {% set tot = states('input_number.haus_betriebskosten_grundsteuer_eur')|float(0) %}
/config/packages/41_verteilung_2025.yaml:89:          {% set m2  = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/41_verteilung_2025.yaml-90-          {% set sum = states('sensor.summe_wohnflaeche_m2')|float(0) %}
/config/packages/41_verteilung_2025.yaml-91-          {{ (tot * m2 / sum) | round(2) if sum>0 else 0 }}
/config/packages/41_verteilung_2025.yaml:92:      - name: whg01_versicherung_anteil_eur_2025
/config/packages/41_verteilung_2025.yaml-93-        unit_of_measurement: "‚Ç¨"
/config/packages/41_verteilung_2025.yaml-94-        state: >-
/config/packages/41_verteilung_2025.yaml-95-          {% set tot = states('input_number.haus_betriebskosten_versicherung_eur')|float(0) %}
/config/packages/41_verteilung_2025.yaml:96:          {% set m2  = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/41_verteilung_2025.yaml-97-          {% set sum = states('sensor.summe_wohnflaeche_m2')|float(0) %}
/config/packages/41_verteilung_2025.yaml-98-          {{ (tot * m2 / sum) | round(2) if sum>0 else 0 }}
/config/packages/41_verteilung_2025.yaml:99:      - name: whg01_muell_anteil_eur_2025
/config/packages/41_verteilung_2025.yaml-100-        unit_of_measurement: "‚Ç¨"
/config/packages/41_verteilung_2025.yaml-101-        state: >-
/config/packages/41_verteilung_2025.yaml-102-          {% set tot = states('input_number.haus_betriebskosten_muellabfuhr_eur')|float(0) %}
/config/packages/41_verteilung_2025.yaml:103:          {% set p   = states('input_number.whg01_personen')|int(0) %}
/config/packages/41_verteilung_2025.yaml-104-          {% set sum = states('sensor.summe_personen')|int(0) %}
/config/packages/41_verteilung_2025.yaml-105-          {{ (tot * p / sum) | round(2) if sum>0 else 0 }}
/config/packages/41_verteilung_2025.yaml:106:      - name: whg01_niederschlagswasser_anteil_eur_2025
/config/packages/41_verteilung_2025.yaml-107-        unit_of_measurement: "‚Ç¨"
/config/packages/41_verteilung_2025.yaml-108-        state: >-
/config/packages/41_verteilung_2025.yaml-109-          {% set tot = states('input_number.haus_betriebskosten_niederschlagswasser_eur')|float(0) %}
/config/packages/41_verteilung_2025.yaml:110:          {% set m2  = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/41_verteilung_2025.yaml-111-          {% set sum = states('sensor.summe_wohnflaeche_m2')|float(0) %}
/config/packages/41_verteilung_2025.yaml-112-          {{ (tot * m2 / sum) | round(2) if sum>0 else 0 }}
/config/packages/41_verteilung_2025.yaml:113:      - name: whg01_wartung_heizung_anteil_eur_2025
/config/packages/41_verteilung_2025.yaml-114-        unit_of_measurement: "‚Ç¨"
/config/packages/41_verteilung_2025.yaml-115-        state: >-
/config/packages/41_verteilung_2025.yaml-116-          {% set tot = states('input_number.haus_betriebskosten_wartung_heizung_eur')|float(0) %}
/config/packages/41_verteilung_2025.yaml:117:          {% set m2  = states('input_number.whg01_wohnflaeche_m2')|float(0) %}
/config/packages/41_verteilung_2025.yaml-118-          {% set sum = states('sensor.summe_wohnflaeche_m2')|float(0) %}
/config/packages/41_verteilung_2025.yaml-119-          {{ (tot * m2 / sum) | round(2) if sum>0 else 0 }}
/config/packages/41_verteilung_2025.yaml:120:      - name: whg01_abrechnungsservice_anteil_eur_2025
/config/packages/41_verteilung_2025.yaml-121-        unit_of_measurement: "‚Ç¨"
/config/packages/41_verteilung_2025.yaml-122-        state: >-
--
/config/packages/PROJEKTSTATUS_HA_BK.md-1-Projektstatus ‚Äì Home Assistant Betriebskosten & Z√§hler (Stand: 2025-09-27 00:00)
/config/packages/PROJEKTSTATUS_HA_BK.md-2-0) Kurzfazit
/config/packages/PROJEKTSTATUS_HA_BK.md:3:Z√§hler- und Abrechnungslogik steht f√ºr WHG01 (Kaltwasser).
/config/packages/PROJEKTSTATUS_HA_BK.md-4-Kern-Entit√§ten jetzt jahresunabh√§ngig (zukunftssicher), Jahreswerte werden √ºber Aliasse f√ºr 2025 an die Gesamtabrechnung durchgereicht.
/config/packages/PROJEKTSTATUS_HA_BK.md-5-Preisstrategie Strom: Alle kWh zum Tibber-/EPEX-Preis, ohne Einspeisung. PV-CAPEX nicht als BK; PV-O&M nur bei konkreter Mietvertragsregelung.
/config/packages/PROJEKTSTATUS_HA_BK.md:6:N√§chstes Ziel: Warmwasser, WMZ und WP f√ºr WHG01 genauso fertigstellen; danach WHG02‚ÄìWHG04 nach gleichem Muster.
/config/packages/PROJEKTSTATUS_HA_BK.md-7-1) Architektur & Datenfl√ºsse (Haus gesamt)
/config/packages/PROJEKTSTATUS_HA_BK.md-8-Strom
--
/config/packages/PROJEKTSTATUS_HA_BK.md-10-PV-Erzeugung (kWh) flie√üt vollst√§ndig als Eigenverbrauch in die Hauslast.
/config/packages/PROJEKTSTATUS_HA_BK.md-11-Hauslast = grid_import + pv_generation.
/config/packages/PROJEKTSTATUS_HA_BK.md:12:Unterz√§hler/Abg√§nge: WHG01‚ÄìWHG04, EV, Hausstrom, WP (kWh-Totals).
/config/packages/PROJEKTSTATUS_HA_BK.md-13-Plausibilisierung: residual = house_total_load ‚àí Œ£(Unterz√§hler), Soll |residual| < 2‚Äì3 %.
/config/packages/PROJEKTSTATUS_HA_BK.md-14-Wasser/W√§rme
--
/config/packages/PROJEKTSTATUS_HA_BK.md-18-Kern-IDs ohne Jahreszahl (dauerhaft g√ºltig): ‚Ä¶_year, ‚Ä¶_vormontage_*, ‚Ä¶_gesamt.
/config/packages/PROJEKTSTATUS_HA_BK.md-19-Jahres-Aliasse 2025 nur f√ºr Summendatei (z. B. ‚Ä¶_anteil_eur_2025).
/config/packages/PROJEKTSTATUS_HA_BK.md:20:Beispiel WHG01 ‚Äì Wasser kalt
/config/packages/PROJEKTSTATUS_HA_BK.md:21:Total (MQTT): sensor.whg01_wasserzaehler_total_m3_kalt
/config/packages/PROJEKTSTATUS_HA_BK.md:22:Utility Meter (aktuelles Jahr): sensor.whg01_wasser_kalt_m3_year
/config/packages/PROJEKTSTATUS_HA_BK.md:23:Vormontage (aktuelles Jahr): input_number.whg01_wasser_kalt_vormontage_m3
/config/packages/PROJEKTSTATUS_HA_BK.md:24:Jahr gesamt (Kern): sensor.whg01_wasser_kalt_m3_gesamt
/config/packages/PROJEKTSTATUS_HA_BK.md-25-Abrechnung 2025 (Alias ‚Ç¨):
/config/packages/PROJEKTSTATUS_HA_BK.md:26:sensor.whg01_wasser_anteil_eur_2025
/config/packages/PROJEKTSTATUS_HA_BK.md:27:sensor.whg01_abwasser_anteil_eur_2025
/config/packages/PROJEKTSTATUS_HA_BK.md:28:Kalibrierung UTM (falls n√∂tig): Entwicklerwerkzeuge ‚Üí Aktionen ‚Üí utility_meter.calibrate ‚Üí Entity sensor.whg01_wasser_kalt_m3_year ‚Üí Wert = Nach-Montage-Jahresmenge (z. B. 3.955).
/config/packages/PROJEKTSTATUS_HA_BK.md:29:3) Aktueller technischer Stand (WHG01)
/config/packages/PROJEKTSTATUS_HA_BK.md-30-3.1 Kaltwasser ‚Äì fertig
/config/packages/PROJEKTSTATUS_HA_BK.md:31:MQTT-Quelle: wmbusmeters/Wasserzaehler_Whg01 ‚Üí sensor.whg01_wasserzaehler_total_m3_kalt
/config/packages/PROJEKTSTATUS_HA_BK.md:32:UTM (Year): sensor.whg01_wasser_kalt_m3_year (state_class: total_increasing)
/config/packages/PROJEKTSTATUS_HA_BK.md:33:Vormontage: input_number.whg01_wasser_kalt_vormontage_m3
/config/packages/PROJEKTSTATUS_HA_BK.md:34:Jahr gesamt: sensor.whg01_wasser_kalt_m3_gesamt = year + vormontage
/config/packages/PROJEKTSTATUS_HA_BK.md:35:‚Ç¨-Alias 2025: whg01_wasser_anteil_eur_2025, whg01_abwasser_anteil_eur_2025
/config/packages/PROJEKTSTATUS_HA_BK.md-36-Kontrollwerte (Beispiel): Total ‚âà 3.95 m¬≥ (seit Montage), Vormontage = 10.00 m¬≥ ‚Üí Jahr gesamt ~ 13.95 m¬≥ (UTM ggf. kalibriert).
/config/packages/PROJEKTSTATUS_HA_BK.md-37-3.2 Warmwasser ‚Äì angelegt, noch ohne Hardware
/config/packages/PROJEKTSTATUS_HA_BK.md:38:MQTT-Placeholder: wmbusmeters/Wasserzaehler_Whg01_Warm ‚Üí sensor.whg01_wasserzaehler_total_m3_warm
/config/packages/PROJEKTSTATUS_HA_BK.md:39:UTM (Year): sensor.whg01_wasser_warm_m3_year
/config/packages/PROJEKTSTATUS_HA_BK.md:40:Vormontage: input_number.whg01_wasser_warm_vormontage_m3
/config/packages/PROJEKTSTATUS_HA_BK.md:41:Jahr gesamt: sensor.whg01_wasser_warm_m3_gesamt
/config/packages/PROJEKTSTATUS_HA_BK.md:42:‚Ç¨-Alias 2025: whg01_wasser_warm_anteil_eur_2025, whg01_abwasser_warm_anteil_eur_2025
/config/packages/PROJEKTSTATUS_HA_BK.md-43-3.3 WMZ (W√§rmemenge) ‚Äì angelegt
/config/packages/PROJEKTSTATUS_HA_BK.md:44:MQTT-Quelle: wmbusmeters/sensostar_wmz_94857143 ‚Üí sensor.whg01_wmz_total_kwh
/config/packages/PROJEKTSTATUS_HA_BK.md:45:UTM (Year): sensor.whg01_wmz_kwh_year
/config/packages/PROJEKTSTATUS_HA_BK.md:46:Vormontage: input_number.whg01_wmz_vormontage_kwh
/config/packages/PROJEKTSTATUS_HA_BK.md:47:Jahr gesamt: sensor.whg01_wmz_kwh_gesamt
/config/packages/PROJEKTSTATUS_HA_BK.md:48:‚Ç¨-Alias 2025: whg01_wmz_anteil_eur_2025 (setzt input_number.haus_kosten_waermemenge_arbeitspreis_eur_kwh voraus)
/config/packages/PROJEKTSTATUS_HA_BK.md-49-3.4 Strom / WP ‚Äì angelegt
/config/packages/PROJEKTSTATUS_HA_BK.md:50:Quelle: bestehender Unterz√§hler WP, Entity noch eintragen bei utility_meter.whg01_strom_wp_kwh_year.source
/config/packages/PROJEKTSTATUS_HA_BK.md:51:Vormontage: input_number.whg01_strom_wp_vormontage_kwh
/config/packages/PROJEKTSTATUS_HA_BK.md:52:Jahr gesamt: sensor.whg01_strom_wp_kwh_gesamt
/config/packages/PROJEKTSTATUS_HA_BK.md-53-‚Ç¨-Aliasse 2025:
/config/packages/PROJEKTSTATUS_HA_BK.md:54:Variabel: whg01_strom_variabel_anteil_eur_2025 (Tibber-/EPEX-Preis)
/config/packages/PROJEKTSTATUS_HA_BK.md:55:Grundpreis: whg01_strom_grundpreis_anteil_eur_2025 (aus input_number.whg01_strom_grundpreis_anteil_eur)
/config/packages/PROJEKTSTATUS_HA_BK.md-56-4) Preis- & Rechtsrahmen (Strom)
/config/packages/PROJEKTSTATUS_HA_BK.md-57-Arbeitspreis: interne Abrechnung = Tibber-/EPEX-Preis f√ºr alle kWh (einfach, gut erkl√§rbar).
--
/config/packages/PROJEKTSTATUS_HA_BK.md-70-MQTT-Sensoren initial ‚Äûunbekannt‚Äú, bis erste (retained) Nachricht ankommt ‚Üí Add-on kurz neu starten hilft.
/config/packages/PROJEKTSTATUS_HA_BK.md-71-7) Offene Punkte / To-dos (priorisiert)
/config/packages/PROJEKTSTATUS_HA_BK.md:72:WHG01 Strom/WP: Quelle (Entity-ID) im UTM eintragen, pr√ºfen, ggf. UTM kalibrieren.
/config/packages/PROJEKTSTATUS_HA_BK.md:73:WHG01 Warmwasser: tats√§chliches Topic setzen, sobald montiert; testen.
/config/packages/PROJEKTSTATUS_HA_BK.md:74:WHG01 WMZ: MQTT-Daten pr√ºfen (Sensostar), ggf. Preishelper bef√ºllen.
/config/packages/PROJEKTSTATUS_HA_BK.md-75-Bridges WHG02‚ÄìWHG04: je Wohnung Kern-IDs + 2025-Aliasse anlegen.
/config/packages/PROJEKTSTATUS_HA_BK.md-76-Strombilanz hausweit: Residual-Berechnung + Warnsensor (>3 %).
--
/config/packages/PROJEKTSTATUS_HA_BK.md-84-9) N√§chste Schritte (konkret, kurz)
/config/packages/PROJEKTSTATUS_HA_BK.md-85-Heute: UTM Kaltwasser kalibrieren (3.955) ‚Üí pr√ºfen: ‚Ä¶_m3_gesamt ‚âà 13.955.
/config/packages/PROJEKTSTATUS_HA_BK.md:86:Morgen: WHG01 WP-Quelle eintragen und testen; Warmwasser-Topic vorbereiten; WMZ pr√ºfen.
/config/packages/PROJEKTSTATUS_HA_BK.md-87-Danach: WHG02‚ÄìWHG04 im selben Muster durchziehen; Strombilanz hinzuf√ºgen.
--
/config/packages/42_abrechnung_whg01_bridge.yaml:1:# /config/packages/42_abrechnung_whg01_bridge.yaml
/config/packages/42_abrechnung_whg01_bridge.yaml:2:# WHG01 ‚Äì Kern-Entities (jahrunabh√§ngig) + Jahres-Aliasse (2025)
/config/packages/42_abrechnung_whg01_bridge.yaml-3-# Achtung: pro Top-Level-Schl√ºssel nur EIN Block.
/config/packages/42_abrechnung_whg01_bridge.yaml-4-
--
/config/packages/42_abrechnung_whg01_bridge.yaml-6-  sensor:
/config/packages/42_abrechnung_whg01_bridge.yaml-7-    # KALTWASSER (l√§uft)
/config/packages/42_abrechnung_whg01_bridge.yaml:8:    - name: "whg01_wasserzaehler_total_m3_kalt"
/config/packages/42_abrechnung_whg01_bridge.yaml:9:      unique_id: whg01_wasserzaehler_total_m3_kalt
/config/packages/42_abrechnung_whg01_bridge.yaml:10:      state_topic: "wmbusmeters/Wasserzaehler_Whg01"
/config/packages/42_abrechnung_whg01_bridge.yaml-11-      value_template: "{{ value_json.total_m3 | float(0) }}"
/config/packages/42_abrechnung_whg01_bridge.yaml-12-      unit_of_measurement: "m¬≥"
/config/packages/42_abrechnung_whg01_bridge.yaml-13-      device_class: water
/config/packages/42_abrechnung_whg01_bridge.yaml-14-      state_class: total_increasing
/config/packages/42_abrechnung_whg01_bridge.yaml:15:      json_attributes_topic: "wmbusmeters/Wasserzaehler_Whg01"
/config/packages/42_abrechnung_whg01_bridge.yaml-16-
/config/packages/42_abrechnung_whg01_bridge.yaml-17-    # WARMWASSER (noch nicht montiert; Topic ggf. anpassen)
/config/packages/42_abrechnung_whg01_bridge.yaml:18:    - name: "whg01_wasserzaehler_total_m3_warm"
/config/packages/42_abrechnung_whg01_bridge.yaml:19:      unique_id: whg01_wasserzaehler_total_m3_warm
/config/packages/42_abrechnung_whg01_bridge.yaml:20:      state_topic: "wmbusmeters/Wasserzaehler_Whg01_Warm"
/config/packages/42_abrechnung_whg01_bridge.yaml-21-      value_template: "{{ value_json.total_m3 | float(0) }}"
/config/packages/42_abrechnung_whg01_bridge.yaml-22-      unit_of_measurement: "m¬≥"
/config/packages/42_abrechnung_whg01_bridge.yaml-23-      device_class: water
/config/packages/42_abrechnung_whg01_bridge.yaml-24-      state_class: total_increasing
/config/packages/42_abrechnung_whg01_bridge.yaml:25:      json_attributes_topic: "wmbusmeters/Wasserzaehler_Whg01_Warm"
/config/packages/42_abrechnung_whg01_bridge.yaml-26-
/config/packages/42_abrechnung_whg01_bridge.yaml-27-    # WMZ (Sensostar ‚Äì Topic ggf. anpassen)
/config/packages/42_abrechnung_whg01_bridge.yaml:28:    - name: "whg01_wmz_total_kwh"
/config/packages/42_abrechnung_whg01_bridge.yaml:29:      unique_id: whg01_wmz_total_kwh
/config/packages/42_abrechnung_whg01_bridge.yaml-30-      state_topic: "wmbusmeters/sensostar_wmz_94857143"
/config/packages/42_abrechnung_whg01_bridge.yaml-31-      value_template: "{{ value_json.total_kwh | float(0) }}"
--
/config/packages/42_abrechnung_whg01_bridge.yaml-37-utility_meter:
/config/packages/42_abrechnung_whg01_bridge.yaml-38-  # Jahr-UTILITY (immer aktuelles Jahr)
/config/packages/42_abrechnung_whg01_bridge.yaml:39:  whg01_wasser_kalt_m3_year:
/config/packages/42_abrechnung_whg01_bridge.yaml:40:    name: "WHG01 Wasser kalt ‚Äì Jahr"
/config/packages/42_abrechnung_whg01_bridge.yaml:41:    source: sensor.whg01_wasserzaehler_total_m3_kalt
/config/packages/42_abrechnung_whg01_bridge.yaml-42-    cycle: yearly
/config/packages/42_abrechnung_whg01_bridge.yaml-43-
/config/packages/42_abrechnung_whg01_bridge.yaml:44:  whg01_wasser_warm_m3_year:
/config/packages/42_abrechnung_whg01_bridge.yaml:45:    name: "WHG01 Wasser warm ‚Äì Jahr"
/config/packages/42_abrechnung_whg01_bridge.yaml:46:    source: sensor.whg01_wasserzaehler_total_m3_warm
/config/packages/42_abrechnung_whg01_bridge.yaml-47-    cycle: yearly
/config/packages/42_abrechnung_whg01_bridge.yaml-48-
/config/packages/42_abrechnung_whg01_bridge.yaml:49:  whg01_wmz_kwh_year:
/config/packages/42_abrechnung_whg01_bridge.yaml:50:    name: "WHG01 WMZ ‚Äì Jahr"
/config/packages/42_abrechnung_whg01_bridge.yaml:51:    source: sensor.whg01_wmz_total_kwh
/config/packages/42_abrechnung_whg01_bridge.yaml-52-    cycle: yearly
/config/packages/42_abrechnung_whg01_bridge.yaml-53-
/config/packages/42_abrechnung_whg01_bridge.yaml-54-  # WP/Strom ‚Äì EXISTIERENDE Entity als Quelle eintragen!
/config/packages/42_abrechnung_whg01_bridge.yaml:55:  whg01_strom_wp_kwh_year:
/config/packages/42_abrechnung_whg01_bridge.yaml:56:    name: "WHG01 Strom/WP ‚Äì Jahr"
/config/packages/42_abrechnung_whg01_bridge.yaml:57:    source: sensor.whg01_wp_total_kwh   # <-- ggf. anpassen
/config/packages/42_abrechnung_whg01_bridge.yaml-58-    cycle: yearly
/config/packages/42_abrechnung_whg01_bridge.yaml-59-
/config/packages/42_abrechnung_whg01_bridge.yaml-60-input_number:
/config/packages/42_abrechnung_whg01_bridge.yaml-61-  # Vormontage (immer ‚Äûaktuelles Jahr‚Äú ‚Äî ab Folgejahr = 0)
/config/packages/42_abrechnung_whg01_bridge.yaml:62:  whg01_wasser_kalt_vormontage_m3:
/config/packages/42_abrechnung_whg01_bridge.yaml:63:    name: "WHG01 Wasser kalt ‚Äì Vormontage [m¬≥]"
/config/packages/42_abrechnung_whg01_bridge.yaml-64-    min: 0
/config/packages/42_abrechnung_whg01_bridge.yaml-65-    max: 100000
--
/config/packages/42_abrechnung_whg01_bridge.yaml-68-    unit_of_measurement: "m¬≥"
/config/packages/42_abrechnung_whg01_bridge.yaml-69-
/config/packages/42_abrechnung_whg01_bridge.yaml:70:  whg01_wasser_warm_vormontage_m3:
/config/packages/42_abrechnung_whg01_bridge.yaml:71:    name: "WHG01 Wasser warm ‚Äì Vormontage [m¬≥]"
/config/packages/42_abrechnung_whg01_bridge.yaml-72-    min: 0
/config/packages/42_abrechnung_whg01_bridge.yaml-73-    max: 100000
--
/config/packages/42_abrechnung_whg01_bridge.yaml-76-    unit_of_measurement: "m¬≥"
/config/packages/42_abrechnung_whg01_bridge.yaml-77-
/config/packages/42_abrechnung_whg01_bridge.yaml:78:  whg01_wmz_vormontage_kwh:
/config/packages/42_abrechnung_whg01_bridge.yaml:79:    name: "WHG01 WMZ ‚Äì Vormontage [kWh]"
/config/packages/42_abrechnung_whg01_bridge.yaml-80-    min: 0
/config/packages/42_abrechnung_whg01_bridge.yaml-81-    max: 100000
--
/config/packages/42_abrechnung_whg01_bridge.yaml-84-    unit_of_measurement: "kWh"
/config/packages/42_abrechnung_whg01_bridge.yaml-85-
/config/packages/42_abrechnung_whg01_bridge.yaml:86:  whg01_strom_wp_vormontage_kwh:
/config/packages/42_abrechnung_whg01_bridge.yaml:87:    name: "WHG01 Strom/WP ‚Äì Vormontage [kWh]"
/config/packages/42_abrechnung_whg01_bridge.yaml-88-    min: 0
/config/packages/42_abrechnung_whg01_bridge.yaml-89-    max: 100000
--
/config/packages/42_abrechnung_whg01_bridge.yaml-93-
/config/packages/42_abrechnung_whg01_bridge.yaml-94-  # Grundpreis-Anteil (falls je Wohnung fix verteilt werden soll)
/config/packages/42_abrechnung_whg01_bridge.yaml:95:  whg01_strom_grundpreis_anteil_eur:
/config/packages/42_abrechnung_whg01_bridge.yaml:96:    name: "WHG01 Strom ‚Äì Grundpreis-Anteil [‚Ç¨]"
/config/packages/42_abrechnung_whg01_bridge.yaml-97-    min: 0
/config/packages/42_abrechnung_whg01_bridge.yaml-98-    max: 100000
--
/config/packages/42_abrechnung_whg01_bridge.yaml-104-  - sensor:
/config/packages/42_abrechnung_whg01_bridge.yaml-105-      # ‚îÄ‚îÄ KERN (jahrunabh√§ngig): Kaltwasser ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
/config/packages/42_abrechnung_whg01_bridge.yaml:106:      - name: "whg01_wasser_kalt_m3_gesamt"
/config/packages/42_abrechnung_whg01_bridge.yaml:107:        unique_id: whg01_wasser_kalt_m3_gesamt
/config/packages/42_abrechnung_whg01_bridge.yaml-108-        unit_of_measurement: "m¬≥"
/config/packages/42_abrechnung_whg01_bridge.yaml-109-        state: >
/config/packages/42_abrechnung_whg01_bridge.yaml:110:          {{ ( states('sensor.whg01_wasser_kalt_m3_year')|float(0)
/config/packages/42_abrechnung_whg01_bridge.yaml:111:             + states('input_number.whg01_wasser_kalt_vormontage_m3')|float(0) ) | round(3) }}
/config/packages/42_abrechnung_whg01_bridge.yaml-112-
/config/packages/42_abrechnung_whg01_bridge.yaml-113-      # ‚îÄ‚îÄ KERN: Warmwasser ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
/config/packages/42_abrechnung_whg01_bridge.yaml:114:      - name: "whg01_wasser_warm_m3_gesamt"
/config/packages/42_abrechnung_whg01_bridge.yaml:115:        unique_id: whg01_wasser_warm_m3_gesamt
/config/packages/42_abrechnung_whg01_bridge.yaml-116-        unit_of_measurement: "m¬≥"
/config/packages/42_abrechnung_whg01_bridge.yaml-117-        state: >
/config/packages/42_abrechnung_whg01_bridge.yaml:118:          {{ ( states('sensor.whg01_wasser_warm_m3_year')|float(0)
/config/packages/42_abrechnung_whg01_bridge.yaml:119:             + states('input_number.whg01_wasser_warm_vormontage_m3')|float(0) ) | round(3) }}
/config/packages/42_abrechnung_whg01_bridge.yaml-120-
/config/packages/42_abrechnung_whg01_bridge.yaml-121-      # ‚îÄ‚îÄ KERN: WMZ (kWh) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
/config/packages/42_abrechnung_whg01_bridge.yaml:122:      - name: "whg01_wmz_kwh_gesamt"
/config/packages/42_abrechnung_whg01_bridge.yaml:123:        unique_id: whg01_wmz_kwh_gesamt
/config/packages/42_abrechnung_whg01_bridge.yaml-124-        unit_of_measurement: "kWh"
/config/packages/42_abrechnung_whg01_bridge.yaml-125-        state: >
/config/packages/42_abrechnung_whg01_bridge.yaml:126:          {{ ( states('sensor.whg01_wmz_kwh_year')|float(0)
/config/packages/42_abrechnung_whg01_bridge.yaml:127:             + states('input_number.whg01_wmz_vormontage_kwh')|float(0) ) | round(1) }}
/config/packages/42_abrechnung_whg01_bridge.yaml-128-
/config/packages/42_abrechnung_whg01_bridge.yaml-129-      # ‚îÄ‚îÄ KERN: Strom/WP (kWh) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
/config/packages/42_abrechnung_whg01_bridge.yaml:130:      - name: "whg01_strom_wp_kwh_gesamt"
/config/packages/42_abrechnung_whg01_bridge.yaml:131:        unique_id: whg01_strom_wp_kwh_gesamt
/config/packages/42_abrechnung_whg01_bridge.yaml-132-        unit_of_measurement: "kWh"
/config/packages/42_abrechnung_whg01_bridge.yaml-133-        state: >
/config/packages/42_abrechnung_whg01_bridge.yaml:134:          {{ ( states('sensor.whg01_strom_wp_kwh_year')|float(0)
/config/packages/42_abrechnung_whg01_bridge.yaml:135:             + states('input_number.whg01_strom_wp_vormontage_kwh')|float(0) ) | round(1) }}
/config/packages/42_abrechnung_whg01_bridge.yaml-136-
/config/packages/42_abrechnung_whg01_bridge.yaml-137-      # ‚îÄ‚îÄ JAHRES-ALIASSE 2025 (zeigen intern auf die Kernwerte) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
/config/packages/42_abrechnung_whg01_bridge.yaml:138:      - name: "whg01_wasser_anteil_eur_2025"
/config/packages/42_abrechnung_whg01_bridge.yaml:139:        unique_id: whg01_wasser_anteil_eur_2025
/config/packages/42_abrechnung_whg01_bridge.yaml-140-        unit_of_measurement: "‚Ç¨"
/config/packages/42_abrechnung_whg01_bridge.yaml-141-        state: >
/config/packages/42_abrechnung_whg01_bridge.yaml:142:          {{ ( states('sensor.whg01_wasser_kalt_m3_gesamt')|float(0)
/config/packages/42_abrechnung_whg01_bridge.yaml-143-             * states('input_number.haus_kosten_wasser_arbeitspreis_eur_m3')|float(0) ) | round(2) }}
/config/packages/42_abrechnung_whg01_bridge.yaml-144-
/config/packages/42_abrechnung_whg01_bridge.yaml:145:      - name: "whg01_abwasser_anteil_eur_2025"
/config/packages/42_abrechnung_whg01_bridge.yaml:146:        unique_id: whg01_abwasser_anteil_eur_2025
/config/packages/42_abrechnung_whg01_bridge.yaml-147-        unit_of_measurement: "‚Ç¨"
/config/packages/42_abrechnung_whg01_bridge.yaml-148-        state: >
/config/packages/42_abrechnung_whg01_bridge.yaml:149:          {{ ( states('sensor.whg01_wasser_kalt_m3_gesamt')|float(0)
/config/packages/42_abrechnung_whg01_bridge.yaml-150-             * states('input_number.haus_kosten_abwasser_arbeitspreis_eur_m3')|float(0) ) | round(2) }}
/config/packages/42_abrechnung_whg01_bridge.yaml-151-
/config/packages/42_abrechnung_whg01_bridge.yaml:152:      - name: "whg01_wasser_warm_anteil_eur_2025"
/config/packages/42_abrechnung_whg01_bridge.yaml:153:        unique_id: whg01_wasser_warm_anteil_eur_2025
/config/packages/42_abrechnung_whg01_bridge.yaml-154-        unit_of_measurement: "‚Ç¨"
/config/packages/42_abrechnung_whg01_bridge.yaml-155-        state: >
/config/packages/42_abrechnung_whg01_bridge.yaml:156:          {{ ( states('sensor.whg01_wasser_warm_m3_gesamt')|float(0)
/config/packages/42_abrechnung_whg01_bridge.yaml-157-             * states('input_number.haus_kosten_wasser_arbeitspreis_eur_m3')|float(0) ) | round(2) }}
/config/packages/42_abrechnung_whg01_bridge.yaml-158-
/config/packages/42_abrechnung_whg01_bridge.yaml:159:      - name: "whg01_abwasser_warm_anteil_eur_2025"
/config/packages/42_abrechnung_whg01_bridge.yaml:160:        unique_id: whg01_abwasser_warm_anteil_eur_2025
/config/packages/42_abrechnung_whg01_bridge.yaml-161-        unit_of_measurement: "‚Ç¨"
/config/packages/42_abrechnung_whg01_bridge.yaml-162-        state: >
/config/packages/42_abrechnung_whg01_bridge.yaml:163:          {{ ( states('sensor.whg01_wasser_warm_m3_gesamt')|float(0)
/config/packages/42_abrechnung_whg01_bridge.yaml-164-             * states('input_number.haus_kosten_abwasser_arbeitspreis_eur_m3')|float(0) ) | round(2) }}
/config/packages/42_abrechnung_whg01_bridge.yaml-165-
/config/packages/42_abrechnung_whg01_bridge.yaml:166:      - name: "whg01_wmz_anteil_eur_2025"
/config/packages/42_abrechnung_whg01_bridge.yaml:167:        unique_id: whg01_wmz_anteil_eur_2025
/config/packages/42_abrechnung_whg01_bridge.yaml-168-        unit_of_measurement: "‚Ç¨"
/config/packages/42_abrechnung_whg01_bridge.yaml-169-        state: >
/config/packages/42_abrechnung_whg01_bridge.yaml:170:          {{ ( states('sensor.whg01_wmz_kwh_gesamt')|float(0)
/config/packages/42_abrechnung_whg01_bridge.yaml-171-             * states('input_number.haus_kosten_waermemenge_arbeitspreis_eur_kwh')|float(0) ) | round(2) }}
/config/packages/42_abrechnung_whg01_bridge.yaml-172-
/config/packages/42_abrechnung_whg01_bridge.yaml:173:      - name: "whg01_strom_variabel_anteil_eur_2025"
/config/packages/42_abrechnung_whg01_bridge.yaml:174:        unique_id: whg01_strom_variabel_anteil_eur_2025
/config/packages/42_abrechnung_whg01_bridge.yaml-175-        unit_of_measurement: "‚Ç¨"
/config/packages/42_abrechnung_whg01_bridge.yaml-176-        state: >
/config/packages/42_abrechnung_whg01_bridge.yaml:177:          {{ ( states('sensor.whg01_strom_wp_kwh_gesamt')|float(0)
/config/packages/42_abrechnung_whg01_bridge.yaml-178-             * states('input_number.haus_kosten_strom_arbeitspreis_eur_kwh')|float(0) ) | round(2) }}
/config/packages/42_abrechnung_whg01_bridge.yaml-179-
/config/packages/42_abrechnung_whg01_bridge.yaml:180:      - name: "whg01_strom_grundpreis_anteil_eur_2025"
/config/packages/42_abrechnung_whg01_bridge.yaml:181:        unique_id: whg01_strom_grundpreis_anteil_eur_2025
/config/packages/42_abrechnung_whg01_bridge.yaml-182-        unit_of_measurement: "‚Ç¨"
/config/packages/42_abrechnung_whg01_bridge.yaml-183-        state: >
/config/packages/42_abrechnung_whg01_bridge.yaml:184:          {{ states('input_number.whg01_strom_grundpreis_anteil_eur')|float(0) | round(2) }}
